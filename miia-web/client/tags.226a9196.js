import{S as e,i as t,s as n,G as l,b as s,c as a,f as i,d as c,h as r,p as o,a as h,n as d,H as u,o as f,I as m,t as g,g as p,J as v,j as $,u as b,l as x,r as _,k as y,m as E,e as k,K as w,B as I,L as D,A as R,v as V,y as S,z as L,C as U,M as O,N,O as P,P as j,Q as M,R as T,E as Q}from"./client.e39d24b1.js";import{G as A,c as H,I as z,t as B,T as G}from"./TagSearch.49e98083.js";function C(e){let t,n,l,o=e[13].message+"";return{c(){t=s("div"),n=s("pre"),l=g(o),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=i(t);n=a(s,"PRE",{style:!0});var r=i(n);l=p(r,o),r.forEach(c),s.forEach(c),this.h()},h(){v(n,"color","red"),r(t,"class","card-body")},m(e,s){h(e,t,s),$(t,n),$(n,l)},p(e,t){1&t&&o!==(o=e[13].message+"")&&b(l,o)},d(e){e&&c(t)}}}function J(e){let t,n,l,i;return{c(){t=s("img"),this.h()},l(e){t=a(e,"IMG",{src:!0,alt:!0,id:!0,class:!0}),this.h()},h(){t.src!==(n=URL.createObjectURL(e[12]))&&r(t,"src",n),r(t,"alt",e[0]),r(t,"id",e[0]),r(t,"class","svelte-1x1zhyt")},m(n,s){h(n,t,s),e[8](t),l||(i=[x(t,"load",e[4]),x(t,"click",e[5])],l=!0)},p(e,l){1&l&&t.src!==(n=URL.createObjectURL(e[12]))&&r(t,"src",n),1&l&&r(t,"alt",e[0]),1&l&&r(t,"id",e[0])},d(n){n&&c(t),e[8](null),l=!1,_(i)}}}function q(e){let t,n,l,o,d,u;return{c(){t=s("div"),n=s("div"),l=y(),o=s("p"),d=g("Querying "),u=g(e[0]),this.h()},l(s){t=a(s,"DIV",{class:!0});var r=i(t);n=a(r,"DIV",{class:!0,role:!0,"aria-hidden":!0}),i(n).forEach(c),l=E(r),o=a(r,"P",{});var h=i(o);d=p(h,"Querying "),u=p(h,e[0]),h.forEach(c),r.forEach(c),this.h()},h(){r(n,"class","spinner-border"),r(n,"role","status"),r(n,"aria-hidden","true"),r(t,"class","card-body loading svelte-1x1zhyt")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(t,o),$(o,d),$(o,u)},p(e,t){1&t&&b(u,e[0])},d(e){e&&c(t)}}}function F(e){let t,n,u={ctx:e,current:null,token:null,pending:q,then:J,catch:C,value:12,error:13};return l(n=e[3](e[0]),u),{c(){t=s("div"),u.block.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var n=i(t);u.block.l(n),n.forEach(c),this.h()},h(){r(t,"class","card svelte-1x1zhyt"),o(t,"active",e[1])},m(e,n){h(e,t,n),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=null},p(s,[a]){if(e=s,u.ctx=e,1&a&&n!==(n=e[3](e[0]))&&l(n,u));else{const t=e.slice();t[12]=u.resolved,u.block.p(t,a)}2&a&&o(t,"active",e[1])},i:d,o:d,d(e){e&&c(t),u.block.d(),u.token=null,u=null}}}function K(e,t,n){let l,{file_id:s}=t,{max_width:a=200}=t,{max_height:i=200}=t,{active:c=!1}=t;const r=u();return f(async()=>{}),e.$set=e=>{"file_id"in e&&n(0,s=e.file_id),"max_width"in e&&n(6,a=e.max_width),"max_height"in e&&n(7,i=e.max_height),"active"in e&&n(1,c=e.active)},[s,c,l,async function(e){const t=A();return await t.get_thumbnail({file_id:e})},function(){const e=H(l.naturalWidth,l.naturalHeight,a,i);n(2,l.width=e.width,l),n(2,l.height=e.height,l)},function(e){r("click",{source_event:e,file_id:s,dom_image:l})},a,i,function(e){m[e?"unshift":"push"](()=>{l=e,n(2,l)})}]}class W extends e{constructor(e){super(),t(this,e,K,F,n,{file_id:0,max_width:6,max_height:7,active:1})}}function Y(e){let t,n,s={ctx:e,current:null,token:null,pending:ee,then:Z,catch:X,value:6,error:7};return l(n=e[2](e[0]),s),{c(){t=k(),s.block.c()},l(e){t=k(),s.block.l(e)},m(e,n){h(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>t.parentNode,s.anchor=t},p(t,a){if(e=t,s.ctx=e,1&a&&n!==(n=e[2](e[0]))&&l(n,s));else{const t=e.slice();t[6]=s.resolved,s.block.p(t,a)}},d(e){e&&c(t),s.block.d(e),s.token=null,s=null}}}function X(e){let t,n,l,r=e[7].message+"";return{c(){t=y(),n=s("pre"),l=g(r),this.h()},l(e){t=E(e),n=a(e,"PRE",{style:!0});var s=i(n);l=p(s,r),s.forEach(c),this.h()},h(){v(n,"color","red")},m(e,s){h(e,t,s),h(e,n,s),$(n,l)},p(e,t){1&t&&r!==(r=e[7].message+"")&&b(l,r)},d(e){e&&c(t),e&&c(n)}}}function Z(e){let t,n;return{c(){t=s("img"),this.h()},l(e){t=a(e,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){r(t,"class","img-fluid"),t.src!==(n=e[6])&&r(t,"src",n),r(t,"alt","")},m(e,n){h(e,t,n)},p(e,l){1&l&&t.src!==(n=e[6])&&r(t,"src",n)},d(e){e&&c(t)}}}function ee(e){let t,n;return{c(){t=s("div"),this.h()},l(e){t=a(e,"DIV",{class:!0,role:!0,title:!0,"aria-hidden":!0}),i(t).forEach(c),this.h()},h(){r(t,"class","spinner-border svelte-1imv7t1"),r(t,"role","status"),r(t,"title",n="Downloading "+e[0]),r(t,"aria-hidden","true")},m(e,n){h(e,t,n)},p(e,l){1&l&&n!==(n="Downloading "+e[0])&&r(t,"title",n)},d(e){e&&c(t)}}}function te(e){let t,n="object"==typeof e[1]&&z(e[1].mime),l=n&&Y(e);return{c(){l&&l.c(),t=k()},l(e){l&&l.l(e),t=k()},m(e,n){l&&l.m(e,n),h(e,t,n)},p(e,[s]){2&s&&(n="object"==typeof e[1]&&z(e[1].mime)),n?l?l.p(e,s):(l=Y(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:d,o:d,d(e){l&&l.d(e),e&&c(t)}}}function ne(e,t,n){let l,{file_id:s}=t,{metadata:a}=t,{file:i=null}=t;return f(async()=>()=>{l&&URL.revokeObjectURL(l)}),e.$set=e=>{"file_id"in e&&n(0,s=e.file_id),"metadata"in e&&n(1,a=e.metadata),"file"in e&&n(3,i=e.file)},[s,a,async function(e){l&&URL.revokeObjectURL(l);const t=A(),c=await t.get_file({file_id:s});return n(3,i=new File([c],String(s)+a.ext,{type:a.mime})),l=URL.createObjectURL(i),l},i]}class le extends e{constructor(e){super(),t(this,e,ne,te,n,{file_id:0,metadata:1,file:3})}}function se(e){let t,n,l,o,d,u,f,m,v,b,_,k,V;const S=[ie,ae],L=[];function U(e,t){return"number"==typeof e[0]?0:1}o=U(e),d=L[o]=S[o](e);let O=e[0]>0&&he(e),N=e[0]<e[2].length-1&&de(e);return{c(){t=s("div"),n=s("div"),l=s("div"),d.c(),u=y(),O&&O.c(),f=y(),N&&N.c(),m=y(),v=s("button"),b=g("❌"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=i(t);n=a(s,"DIV",{class:!0});var r=i(n);l=a(r,"DIV",{class:!0});var o=i(l);d.l(o),o.forEach(c),r.forEach(c),u=E(s),O&&O.l(s),f=E(s),N&&N.l(s),m=E(s),v=a(s,"BUTTON",{class:!0});var h=i(v);b=p(h,"❌"),h.forEach(c),s.forEach(c),this.h()},h(){r(l,"class","image current svelte-70xrmp"),r(n,"class","images svelte-70xrmp"),r(v,"class","close svelte-70xrmp"),r(t,"class","background svelte-70xrmp")},m(s,a){h(s,t,a),$(t,n),$(n,l),L[o].m(l,null),$(t,u),O&&O.m(t,null),$(t,f),N&&N.m(t,null),$(t,m),$(t,v),$(v,b),_=!0,k||(V=x(v,"click",e[6]),k=!0)},p(e,n){let s=o;o=U(e),o===s?L[o].p(e,n):(w(),I(L[s],1,1,()=>{L[s]=null}),D(),d=L[o],d||(d=L[o]=S[o](e),d.c()),R(d,1),d.m(l,null)),e[0]>0?O?O.p(e,n):(O=he(e),O.c(),O.m(t,f)):O&&(O.d(1),O=null),e[0]<e[2].length-1?N?N.p(e,n):(N=de(e),N.c(),N.m(t,m)):N&&(N.d(1),N=null)},i(e){_||(R(d),_=!0)},o(e){I(d),_=!1},d(e){e&&c(t),L[o].d(),O&&O.d(),N&&N.d(),k=!1,V()}}}function ae(e){let t,n,l,r;return{c(){t=s("pre"),n=g("index ["),l=g(e[0]),r=g("] is not a number"),this.h()},l(s){t=a(s,"PRE",{style:!0});var o=i(t);n=p(o,"index ["),l=p(o,e[0]),r=p(o,"] is not a number"),o.forEach(c),this.h()},h(){v(t,"color","red")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(t,r)},p(e,t){1&t&&b(l,e[0])},i:d,o:d,d(e){e&&c(t)}}}function ie(e){let t,n,s,a={ctx:e,current:null,token:null,pending:oe,then:re,catch:ce,value:10,error:11,blocks:[,,,]};return l(n=e[3](e[2][e[0]]),a),{c(){t=k(),a.block.c()},l(e){t=k(),a.block.l(e)},m(e,n){h(e,t,n),a.block.m(e,a.anchor=n),a.mount=()=>t.parentNode,a.anchor=t,s=!0},p(t,s){if(e=t,a.ctx=e,5&s&&n!==(n=e[3](e[2][e[0]]))&&l(n,a));else{const t=e.slice();t[10]=a.resolved,a.block.p(t,s)}},i(e){s||(R(a.block),s=!0)},o(e){for(let e=0;e<3;e+=1){const t=a.blocks[e];I(t)}s=!1},d(e){e&&c(t),a.block.d(e),a.token=null,a=null}}}function ce(e){let t,n,l,r,o,u,f,m,x,_,k,w,I,D,R,V,S=e[2].length+"",L=e[2][e[0]]+"",U=e[11].message+"";return{c(){t=s("p"),n=g("Querying\n              "),l=s("code"),r=g(e[0]),o=g("\n              of\n              "),u=s("code"),f=g("file_ids["),m=g(S),x=g("]"),_=y(),k=g(L),w=g("'s metadata"),I=y(),D=s("pre"),R=g(U),V=y(),this.h()},l(s){t=a(s,"P",{style:!0});var h=i(t);n=p(h,"Querying\n              "),l=a(h,"CODE",{});var d=i(l);r=p(d,e[0]),d.forEach(c),o=p(h,"\n              of\n              "),u=a(h,"CODE",{});var g=i(u);f=p(g,"file_ids["),m=p(g,S),x=p(g,"]"),g.forEach(c),_=E(h),k=p(h,L),w=p(h,"'s metadata"),h.forEach(c),I=E(s),D=a(s,"PRE",{style:!0});var v=i(D);R=p(v,U),v.forEach(c),V=E(s),this.h()},h(){v(t,"color","yellow"),v(D,"color","red")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(l,r),$(t,o),$(t,u),$(u,f),$(u,m),$(u,x),$(t,_),$(t,k),$(t,w),h(e,I,s),h(e,D,s),$(D,R),h(e,V,s)},p(e,t){1&t&&b(r,e[0]),4&t&&S!==(S=e[2].length+"")&&b(m,S),5&t&&L!==(L=e[2][e[0]]+"")&&b(k,L),5&t&&U!==(U=e[11].message+"")&&b(R,U)},i:d,o:d,d(e){e&&c(t),e&&c(I),e&&c(D),e&&c(V)}}}function re(e){let t,n;return t=new le({props:{file_id:e[2][e[0]],metadata:e[10]}}),{c(){V(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,l){L(t,e,l),n=!0},p(e,n){const l={};5&n&&(l.file_id=e[2][e[0]]),5&n&&(l.metadata=e[10]),t.$set(l)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){I(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function oe(e){let t,n;return{c(){t=s("div"),this.h()},l(e){t=a(e,"DIV",{class:!0,role:!0,title:!0}),i(t).forEach(c),this.h()},h(){r(t,"class","spinner-border svelte-70xrmp"),r(t,"role","status"),r(t,"title",n="Querying "+e[2][e[0]]+"'s metadata")},m(e,n){h(e,t,n)},p(e,l){5&l&&n!==(n="Querying "+e[2][e[0]]+"'s metadata")&&r(t,"title",n)},i:d,o:d,d(e){e&&c(t)}}}function he(e){let t,n,l,o;return{c(){t=s("button"),n=g("◀"),this.h()},l(e){t=a(e,"BUTTON",{id:!0,class:!0});var l=i(t);n=p(l,"◀"),l.forEach(c),this.h()},h(){r(t,"id","previous"),r(t,"class","nav-buttons svelte-70xrmp")},m(s,a){h(s,t,a),$(t,n),l||(o=x(t,"click",e[4]),l=!0)},p:d,d(e){e&&c(t),l=!1,o()}}}function de(e){let t,n,l,o;return{c(){t=s("button"),n=g("▶"),this.h()},l(e){t=a(e,"BUTTON",{id:!0,class:!0});var l=i(t);n=p(l,"▶"),l.forEach(c),this.h()},h(){r(t,"id","next"),r(t,"class","nav-buttons svelte-70xrmp")},m(s,a){h(s,t,a),$(t,n),l||(o=x(t,"click",e[5]),l=!0)},p:d,d(e){e&&c(t),l=!1,o()}}}function ue(e){let t,n,l=e[1]&&se(e);return{c(){l&&l.c(),t=k()},l(e){l&&l.l(e),t=k()},m(e,s){l&&l.m(e,s),h(e,t,s),n=!0},p(e,[n]){e[1]?l?(l.p(e,n),2&n&&R(l,1)):(l=se(e),l.c(),R(l,1),l.m(t.parentNode,t)):l&&(w(),I(l,1,1,()=>{l=null}),D())},i(e){n||(R(l),n=!0)},o(e){I(l),n=!1},d(e){l&&l.d(e),e&&c(t)}}}function fe(e,t,n){let l,{file_ids:s=[]}=t,{index:a=0}=t,{enabled:i=!1}=t,c=new Map;f(()=>{});return e.$set=e=>{"file_ids"in e&&n(2,s=e.file_ids),"index"in e&&n(0,a=e.index),"enabled"in e&&n(1,i=e.enabled)},[a,i,s,async function(e){if(c.has(e))return c.get(e);{l||(l=A());const{metadata:t}=await l.get_file_metadata({file_ids:[e]});return c.set(e,t[0]),t[0]}},()=>{n(0,a--,a)},()=>{n(0,a++,a)},()=>{n(1,i=!1)}]}class me extends e{constructor(e){super(),t(this,e,fe,ue,n,{file_ids:2,index:0,enabled:1})}}const{Map:ge}=j;function pe(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function ve(e,t){let n,l,o,d=t[23];l=new W({props:{file_id:t[21],active:t[0]==t[23]}}),l.$on("click",(function(...e){return t[12](t[23],...e)}));const u=()=>t[13](n,d),f=()=>t[13](null,d);return{key:e,first:null,c(){n=s("div"),V(l.$$.fragment),this.h()},l(e){n=a(e,"DIV",{class:!0});var t=i(n);S(l.$$.fragment,t),t.forEach(c),this.h()},h(){r(n,"class","entry svelte-dgcmbo"),this.first=n},m(e,t){h(e,n,t),L(l,n,null),u(),o=!0},p(e,n){t=e;const s={};4&n&&(s.file_id=t[21]),5&n&&(s.active=t[0]==t[23]),l.$set(s),d!==t[23]&&(f(),d=t[23],u())},i(e){o||(R(l.$$.fragment,e),o=!0)},o(e){I(l.$$.fragment,e),o=!1},d(e){e&&c(n),U(l),f()}}}function $e(e){let t,n,l,o,d,u,f,v,_,k,j,T,Q,A,H,z,B,G=[],C=new ge,J=e[2].length+"",q=e[1].length+"";function F(t){e[9].call(null,t)}function K(t){e[10].call(null,t)}function W(t){e[11].call(null,t)}let Y={};void 0!==e[0]&&(Y.index=e[0]),void 0!==e[5]&&(Y.enabled=e[5]),void 0!==e[2]&&(Y.file_ids=e[2]),t=new me({props:Y}),m.push(()=>O(t,"index",F)),m.push(()=>O(t,"enabled",K)),m.push(()=>O(t,"file_ids",W));let X=e[2];const Z=e=>e[21];for(let t=0;t<X.length;t+=1){let n=pe(e,X,t),l=Z(n);C.set(l,G[t]=ve(l,n))}return{c(){V(t.$$.fragment),d=y(),u=s("div");for(let e=0;e<G.length;e+=1)G[e].c();f=y(),v=s("div"),_=s("div"),k=s("span"),j=g("Loaded "),T=g(J),Q=g(" / "),A=g(q),this.h()},l(e){S(t.$$.fragment,e),d=E(e),u=a(e,"DIV",{class:!0});var n=i(u);for(let e=0;e<G.length;e+=1)G[e].l(n);f=E(n),v=a(n,"DIV",{class:!0});var l=i(v);_=a(l,"DIV",{class:!0});var s=i(_);k=a(s,"SPAN",{});var r=i(k);j=p(r,"Loaded "),T=p(r,J),Q=p(r," / "),A=p(r,q),r.forEach(c),s.forEach(c),l.forEach(c),n.forEach(c),this.h()},h(){r(_,"class","alert alert-primary d-flex align-items-center"),r(v,"class","next-batch-placeholder svelte-dgcmbo"),r(u,"class","gallery")},m(n,l){L(t,n,l),h(n,d,l),h(n,u,l);for(let e=0;e<G.length;e+=1)G[e].m(u,null);$(u,f),$(u,v),$(v,_),$(_,k),$(k,j),$(k,T),$(k,Q),$(k,A),e[14](v),e[15](u),H=!0,z||(B=x(_,"click",e[7]),z=!0)},p(e,[s]){const a={};if(!n&&1&s&&(n=!0,a.index=e[0],N(()=>n=!1)),!l&&32&s&&(l=!0,a.enabled=e[5],N(()=>l=!1)),!o&&4&s&&(o=!0,a.file_ids=e[2],N(()=>o=!1)),t.$set(a),45&s){const t=e[2];w(),G=P(G,s,Z,1,e,t,C,u,M,ve,f,pe),D()}(!H||4&s)&&J!==(J=e[2].length+"")&&b(T,J),(!H||2&s)&&q!==(q=e[1].length+"")&&b(A,q)},i(e){if(!H){R(t.$$.fragment,e);for(let e=0;e<X.length;e+=1)R(G[e]);H=!0}},o(e){I(t.$$.fragment,e);for(let e=0;e<G.length;e+=1)I(G[e]);H=!1},d(n){U(t,n),n&&c(d),n&&c(u);for(let e=0;e<G.length;e+=1)G[e].d();e[14](null),e[15](null),z=!1,B()}}}function be(e,t,n){let l,s,{file_ids:a=[]}=t,i=[],{range:c=10}=t,{index:r=0}=t,o=0,h=[],d=[],u=0,g=!1;function p(){if(a.length>0&&a.length!==h.length){const e=h.length,t=e+c-1,l=a.slice(e,Math.min(t,a.length));n(2,h=h.concat(l))}}f(()=>{const e=new IntersectionObserver(e=>{for(const t of e)switch(t.target){case s:p()}});return e.observe(s),()=>{e.disconnect()}});return e.$set=e=>{"file_ids"in e&&n(1,a=e.file_ids),"range"in e&&n(8,c=e.range),"index"in e&&n(0,r=e.index)},e.$$.update=()=>{65538&e.$$.dirty&&a!==i&&(n(16,i=a),n(2,h=[])),262145&e.$$.dirty&&n(18,u=Math.max(r,u)),262150&e.$$.dirty&&u>=h.length-2&&a.length>0&&(0===h.length?async function(){for(;l.scrollHeight<window.innerHeight;)p(),await T(),await B(200)}():p()),131083&e.$$.dirty&&a.length>0&&r!==o&&d&&d[r]&&(n(17,o=r),d[r].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))},[r,a,h,d,l,g,s,p,c,function(e){r=e,n(0,r)},function(e){g=e,n(5,g)},function(e){h=e,n(2,h),n(1,a),n(16,i)},(e,t)=>{n(0,r=e),n(5,g=!0)},function(e,t){d[t]!==e&&m[e?"unshift":"push"](()=>{d[t]=e,n(3,d),n(2,h),n(1,a),n(16,i)})},function(e){m[e?"unshift":"push"](()=>{s=e,n(6,s)})},function(e){m[e?"unshift":"push"](()=>{l=e,n(4,l)})}]}class xe extends e{constructor(e){super(),t(this,e,be,$e,n,{file_ids:1,range:8,index:0})}}function _e(e,t,n){const l=e.slice();return l[11]=t[n],l}function ye(e){let t,n,l=e[11]+"";return{c(){t=s("span"),n=g(l),this.h()},l(e){t=a(e,"SPAN",{type:!0,class:!0});var s=i(t);n=p(s,l),s.forEach(c),this.h()},h(){r(t,"type","button"),r(t,"class","btn btn-secondary btn-sm")},m(e,l){h(e,t,l),$(t,n)},p(e,t){2&t&&l!==(l=e[11]+"")&&b(n,l)},d(e){e&&c(t)}}}function Ee(e){let t,n,l,o,d,u,f,v,b,x,_,k,w,D,P,j,M,T,A=e[1],H=[];for(let t=0;t<A.length;t+=1)H[t]=ye(_e(e,A,t));function z(t){e[5].call(null,t)}D=new G({props:{tags:e[1],onSearch:e[4]}});let B={};return void 0!==e[0]&&(B.file_ids=e[0]),j=new xe({props:B}),m.push(()=>O(j,"file_ids",z)),{c(){t=s("h1"),n=g("Search Results for"),l=y(),o=s("div"),d=y(),u=s("div"),f=s("details"),v=s("summary"),b=s("span"),x=g("Search:"),_=y();for(let e=0;e<H.length;e+=1)H[e].c();k=y(),w=s("div"),V(D.$$.fragment),P=y(),V(j.$$.fragment),this.h()},l(e){t=a(e,"H1",{});var s=i(t);n=p(s,"Search Results for"),s.forEach(c),l=E(e),o=a(e,"DIV",{class:!0}),i(o).forEach(c),d=E(e),u=a(e,"DIV",{class:!0});var r=i(u);f=a(r,"DETAILS",{});var h=i(f);v=a(h,"SUMMARY",{class:!0});var m=i(v);b=a(m,"SPAN",{});var g=i(b);x=p(g,"Search:"),g.forEach(c),_=E(m);for(let e=0;e<H.length;e+=1)H[e].l(m);m.forEach(c),k=E(h),w=a(h,"DIV",{class:!0});var $=i(w);S(D.$$.fragment,$),$.forEach(c),h.forEach(c),r.forEach(c),P=E(e),S(j.$$.fragment,e),this.h()},h(){r(o,"class","tags"),r(v,"class","card-header"),r(w,"class","card-body"),r(u,"class","card")},m(s,a){h(s,t,a),$(t,n),h(s,l,a),h(s,o,a),e[3](o),h(s,d,a),h(s,u,a),$(u,f),$(f,v),$(v,b),$(b,x),$(v,_);for(let e=0;e<H.length;e+=1)H[e].m(v,null);$(f,k),$(f,w),L(D,w,null),h(s,P,a),L(j,s,a),T=!0},p(e,[t]){if(2&t){let n;for(A=e[1],n=0;n<A.length;n+=1){const l=_e(e,A,n);H[n]?H[n].p(l,t):(H[n]=ye(l),H[n].c(),H[n].m(v,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=A.length}const n={};2&t&&(n.tags=e[1]),2&t&&(n.onSearch=e[4]),D.$set(n);const l={};!M&&1&t&&(M=!0,l.file_ids=e[0],N(()=>M=!1)),j.$set(l)},i(e){T||(R(D.$$.fragment,e),R(j.$$.fragment,e),T=!0)},o(e){I(D.$$.fragment,e),I(j.$$.fragment,e),T=!1},d(n){n&&c(t),n&&c(l),n&&c(o),e[3](null),n&&c(d),n&&c(u),Q(H,n),U(D),n&&c(P),U(j,n)}}}function ke(e,t,n){let l,s=[],a=[];f(()=>{const e=window.location.search,t=new URLSearchParams(e),l=t.get("q");if(l){const e=JSON.parse(l);n(1,a=e)}t.get("id")});return e.$$.update=()=>{2&e.$$.dirty&&(console.log("update!!"),async function(e){if(l){const t=A(),l=await t.search_files(e,!0,!0);n(0,s=l.file_ids)}}(a))},[s,a,l,function(e){m[e?"unshift":"push"](()=>{l=e,n(2,l)})},e=>{console.log("tags set"),n(1,a=e)},function(e){s=e,n(0,s)}]}export default class extends e{constructor(e){super(),t(this,e,ke,Ee,n,{})}}
