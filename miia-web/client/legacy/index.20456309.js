import{w as t,_ as n,a as r,b as e,c as a,i as c,s as i,d as o,S as s,e as u,f as l,g as f,n as h,h as d,o as p,j as v,r as y,k as g,t as m,l as b,m as E,p as k,q as x,u as S,v as R,x as T,y as w,z as I,A as N,B as D,C as $,D as O,E as V,F as P,G as _,H as U,I as q,J as C,K as H,L as B,M as J}from"./client.9cafd7a0.js";import{G as M,r as A}from"./hydrus-connection.1d2cff91.js";var K=t("No Error"),j=t(!1);function G(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var i=r(this).constructor;a=Reflect.construct(c,arguments,i)}else a=c.apply(this,arguments);return e(this,a)}}function L(t){var n,r,e,a,c,i,o,s,u,f=!t[1]&&F(t);return{c:function(){n=g("div"),f&&f.c(),r=T(),e=g("div"),a=g("input"),c=T(),i=g("button"),o=m("Validate Manual Key"),this.h()},l:function(t){n=b(t,"DIV",{id:!0});var s=E(n);f&&f.l(s),r=w(s),e=b(s,"DIV",{class:!0});var u=E(e);a=b(u,"INPUT",{class:!0,type:!0}),c=w(u),i=b(u,"BUTTON",{class:!0});var l=E(i);o=k(l,"Validate Manual Key"),l.forEach(d),u.forEach(d),s.forEach(d),this.h()},h:function(){x(a,"class","form-control"),x(a,"type","password"),x(i,"class","btn"),I(i,"btn-secondary",!t[1]),I(i,"btn-primary",!!t[1]),x(e,"class","add-manual-key input-group"),x(n,"id","connect-key")},m:function(h,d){l(h,n,d),f&&f.m(n,null),S(n,r),S(n,e),S(e,a),N(a,t[2]),S(e,c),S(e,i),S(i,o),s||(u=[R(a,"input",t[10]),R(i,"click",t[11])],s=!0)},p:function(t,e){t[1]?f&&(f.d(1),f=null):f?f.p(t,e):((f=F(t)).c(),f.m(n,r)),4&e&&a.value!==t[2]&&N(a,t[2]),2&e&&I(i,"btn-secondary",!t[1]),2&e&&I(i,"btn-primary",!!t[1])},d:function(t){t&&d(n),f&&f.d(),s=!1,D(u)}}}function W(t){var n,r,e,a,c,i,o,s,u,f,h,p=t[3]&&z(t);return{c:function(){n=g("div"),r=g("p"),e=m("Hydrus Client URL"),a=T(),c=g("input"),i=T(),o=g("button"),s=m("Connect"),u=T(),p&&p.c(),this.h()},l:function(t){n=b(t,"DIV",{id:!0});var l=E(n);r=b(l,"P",{});var f=E(r);e=k(f,"Hydrus Client URL"),f.forEach(d),a=w(l),c=b(l,"INPUT",{}),i=w(l),o=b(l,"BUTTON",{class:!0});var h=E(o);s=k(h,"Connect"),h.forEach(d),u=w(l),p&&p.l(l),l.forEach(d),this.h()},h:function(){x(o,"class","btn btn-primary"),I(o,"disabled",t[3]),x(n,"id","connect-address")},m:function(d,v){l(d,n,v),S(n,r),S(r,e),S(n,a),S(n,c),N(c,t[0]),S(n,i),S(n,o),S(o,s),S(n,u),p&&p.m(n,null),f||(h=[R(c,"input",t[9]),R(o,"click",t[6])],f=!0)},p:function(t,r){1&r&&c.value!==t[0]&&N(c,t[0]),8&r&&I(o,"disabled",t[3]),t[3]?p?p.p(t,r):((p=z(t)).c(),p.m(n,null)):p&&(p.d(1),p=null)},d:function(t){t&&d(n),p&&p.d(),f=!1,D(h)}}}function F(t){var n,r,e,a,c;return{c:function(){n=g("div"),r=g("button"),e=m("Request Temporary Key"),this.h()},l:function(t){n=b(t,"DIV",{class:!0});var a=E(n);r=b(a,"BUTTON",{class:!0});var c=E(r);e=k(c,"Request Temporary Key"),c.forEach(d),a.forEach(d),this.h()},h:function(){x(r,"class","btn btn-primary"),x(n,"class","request-new-key")},m:function(i,o){l(i,n,o),S(n,r),S(r,e),a||(c=R(r,"click",t[7]),a=!0)},p:h,d:function(t){t&&d(n),a=!1,c()}}}function z(t){var n,r,e,a,c=!t[4]&&Q(t),i=!t[5]&&!!t[1]&&X();return{c:function(){n=g("div"),r=g("div"),e=T(),c&&c.c(),a=T(),i&&i.c(),this.h()},l:function(t){n=b(t,"DIV",{class:!0,role:!0});var o=E(n);r=b(o,"DIV",{class:!0,role:!0,"aria-hidden":!0}),E(r).forEach(d),e=w(o),c&&c.l(o),a=w(o),i&&i.l(o),o.forEach(d),this.h()},h:function(){x(r,"class","spinner-border"),x(r,"role","status"),x(r,"aria-hidden","true"),x(n,"class","alert alert-primary d-flex align-items-left"),x(n,"role","alert")},m:function(t,o){l(t,n,o),S(n,r),S(n,e),c&&c.m(n,null),S(n,a),i&&i.m(n,null)},p:function(t,r){t[4]?c&&(c.d(1),c=null):c?c.p(t,r):((c=Q(t)).c(),c.m(n,a)),!t[5]&&t[1]?i||((i=X()).c(),i.m(n,null)):i&&(i.d(1),i=null)},d:function(t){t&&d(n),c&&c.d(),i&&i.d()}}}function Q(t){var n,r,e,a,c;return{c:function(){n=g("p"),r=m("Connecting to\n            "),e=g("strong"),a=m(t[0]),c=m("\n            ...")},l:function(i){n=b(i,"P",{});var o=E(n);r=k(o,"Connecting to\n            "),e=b(o,"STRONG",{});var s=E(e);a=k(s,t[0]),s.forEach(d),c=k(o,"\n            ..."),o.forEach(d)},m:function(t,i){l(t,n,i),S(n,r),S(n,e),S(e,a),S(n,c)},p:function(t,n){1&n&&$(a,t[0])},d:function(t){t&&d(n)}}}function X(t){var n,r;return{c:function(){n=g("p"),r=m("Validating key...")},l:function(t){n=b(t,"P",{});var e=E(n);r=k(e,"Validating key..."),e.forEach(d)},m:function(t,e){l(t,n,e),S(n,r)},d:function(t){t&&d(n)}}}function Y(t){var n;function r(t,n){return t[4]?t[5]?void 0:L:W}var e=r(t),a=e&&e(t);return{c:function(){a&&a.c(),n=u()},l:function(t){a&&a.l(t),n=u()},m:function(t,r){a&&a.m(t,r),l(t,n,r)},p:function(t,c){var i=f(c,1)[0];e===(e=r(t))&&a?a.p(t,i):(a&&a.d(1),(a=e&&e(t))&&(a.c(),a.m(n.parentNode,n)))},i:h,o:h,d:function(t){a&&a.d(t),t&&d(n)}}}function Z(t,n,r){var e="http://127.0.0.1:45869",a="",c="",i=!1,o=!1,s=!1;function u(){return l.apply(this,arguments)}function l(){return(l=v(y.mark((function t(){var n,c,s;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:return r(3,i=!0),n=M(e),t.prev=4,t.next=7,n.api_version();case 7:if(c=t.sent,s=c.version,console.log("Connected with API version: ".concat(s)),localStorage.setItem("address",JSON.stringify(e)),r(4,o=!0),!a){t.next=15;break}return t.next=15,h();case 15:t.next=22;break;case 17:t.prev=17,t.t0=t.catch(4),console.error(t.t0),K.set(t.t0),j.set(!1);case 22:r(3,i=!1);case 23:case"end":return t.stop()}}),t,null,[[4,17]])})))).apply(this,arguments)}function f(){return(f=v(y.mark((function t(){var n,e,i;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=M(),t.prev=1,t.next=4,n.request_new_permissions("miia-web",A);case 4:e=t.sent,i=e.access_key,localStorage.setItem("access_key",JSON.stringify(a)),r(1,a=i),r(2,c=a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}function h(){return d.apply(this,arguments)}function d(){return(d=v(y.mark((function t(){var n,e,c;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(3,i=!0),(n=M()).access_key=a,t.prev=3,t.next=6,n.verify_access_key(a);case 6:e=t.sent,c=e.human_description,localStorage.setItem("access_key",JSON.stringify(a)),console.log(c),r(5,s=!0),j.set(!0),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0);case 17:r(3,i=!1);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}p((function(){var t=localStorage.getItem("address");t&&r(0,e=JSON.parse(t));var n=localStorage.getItem("access_key");n&&r(1,a=JSON.parse(n)),v(y.mark((function n(){return y.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=9;break}return n.prev=1,n.next=4,u();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()}));return[e,a,c,i,o,s,u,function(){return f.apply(this,arguments)},h,function(){e=this.value,r(0,e)},function(){c=this.value,r(2,c)},function(){r(1,a=c),h()}]}var tt=function(t){n(e,s);var r=G(e);function e(t){var n;return a(this,e),n=r.call(this),c(o(n),t,Z,Y,i,{}),n}return e}();function nt(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var i=r(this).constructor;a=Reflect.construct(c,arguments,i)}else a=c.apply(this,arguments);return e(this,a)}}function rt(t,n,r){var e=t.slice();return e[7]=n[r],e}function et(t){var n,r,e,a,c,i,o,s,u=t[7]+"";function f(){for(var n,r=arguments.length,e=new Array(r),a=0;a<r;a++)e[a]=arguments[a];return(n=t)[5].apply(n,[t[7]].concat(e))}return{c:function(){n=g("button"),r=m(u),e=T(),a=g("span"),c=m("×"),this.h()},l:function(t){n=b(t,"BUTTON",{type:!0,class:!0,title:!0});var i=E(n);r=k(i,u),e=w(i),a=b(i,"SPAN",{class:!0,"aria-hidden":!0});var o=E(a);c=k(o,"×"),o.forEach(d),i.forEach(d),this.h()},h:function(){x(a,"class","badge"),x(a,"aria-hidden","true"),x(n,"type","button"),x(n,"class","btn btn-secondary btn-sm"),x(n,"title",i="Remove tag '"+t[7]+"'")},m:function(t,i){l(t,n,i),S(n,r),S(n,e),S(n,a),S(a,c),o||(s=R(n,"click",O(f)),o=!0)},p:function(e,a){t=e,1&a&&u!==(u=t[7]+"")&&$(r,u),1&a&&i!==(i="Remove tag '"+t[7]+"'")&&x(n,"title",i)},d:function(t){t&&d(n),o=!1,s()}}}function at(t){for(var n,r,e,a,c,i,o,s,u,p,v,y,$,P,_,U,q,C,H,B,J,M,A,K,j,G=t[0],L=[],W=0;W<G.length;W+=1)L[W]=et(rt(t,G,W));return{c:function(){n=g("div"),r=g("h2"),e=m("Search"),a=T(),c=g("form"),i=g("div");for(var t=0;t<L.length;t+=1)L[t].c();o=T(),s=g("input"),u=T(),p=g("button"),v=m("Add Tag"),$=T(),P=g("button"),_=m("Search"),q=T(),C=g("div"),H=g("div"),B=g("h3"),J=m("Search Tags"),M=T(),A=g("div"),this.h()},l:function(t){n=b(t,"DIV",{id:!0});var l=E(n);r=b(l,"H2",{});var f=E(r);e=k(f,"Search"),f.forEach(d),a=w(l),c=b(l,"FORM",{});var h=E(c);i=b(h,"DIV",{class:!0});for(var y=E(i),g=0;g<L.length;g+=1)L[g].l(y);o=w(y),s=b(y,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,"aria-describedby":!0}),u=w(y),p=b(y,"BUTTON",{class:!0,disabled:!0,type:!0,id:!0});var m=E(p);v=k(m,"Add Tag"),m.forEach(d),$=w(y),P=b(y,"BUTTON",{class:!0,type:!0,id:!0,disabled:!0});var x=E(P);_=k(x,"Search"),x.forEach(d),y.forEach(d),q=w(h),C=b(h,"DIV",{id:!0,class:!0});var S=E(C);H=b(S,"DIV",{id:!0,class:!0});var R=E(H);B=b(R,"H3",{class:!0});var T=E(B);J=k(T,"Search Tags"),T.forEach(d),R.forEach(d),M=w(S),A=b(S,"DIV",{id:!0,class:!0}),E(A).forEach(d),S.forEach(d),h.forEach(d),l.forEach(d),this.h()},h:function(){x(s,"type","text"),x(s,"class","form-control"),x(s,"placeholder","tag:to-add"),x(s,"aria-label","Tag to add to search query"),x(s,"aria-describedby","add-tag"),x(p,"class","btn"),p.disabled=y=0===t[1].length,x(p,"type","button"),x(p,"id","add-tag"),I(p,"btn-primary",t[1].length>0),I(p,"btn-outline-secondary",0===t[1].length),x(P,"class","btn btn-success"),x(P,"type","button"),x(P,"id","search"),P.disabled=U=0===t[0].length,x(i,"class","input-group"),x(B,"class","sr-only sr-only-focusable"),x(H,"id","tags"),x(H,"class","col"),x(A,"id","action"),x(A,"class","col-auto text-center"),x(C,"id","query"),x(C,"class","row"),x(n,"id","search")},m:function(f,h){l(f,n,h),S(n,r),S(r,e),S(n,a),S(n,c),S(c,i);for(var d=0;d<L.length;d+=1)L[d].m(i,null);S(i,o),S(i,s),N(s,t[1]),S(i,u),S(i,p),S(p,v),S(i,$),S(i,P),S(P,_),S(c,q),S(c,C),S(C,H),S(H,B),S(B,J),S(C,M),S(C,A),K||(j=[R(s,"input",t[6]),R(p,"click",O(t[2])),R(P,"click",O(t[4]))],K=!0)},p:function(t,n){var r=f(n,1)[0];if(9&r){var e;for(G=t[0],e=0;e<G.length;e+=1){var a=rt(t,G,e);L[e]?L[e].p(a,r):(L[e]=et(a),L[e].c(),L[e].m(i,o))}for(;e<L.length;e+=1)L[e].d(1);L.length=G.length}2&r&&s.value!==t[1]&&N(s,t[1]),2&r&&y!==(y=0===t[1].length)&&(p.disabled=y),2&r&&I(p,"btn-primary",t[1].length>0),2&r&&I(p,"btn-outline-secondary",0===t[1].length),1&r&&U!==(U=0===t[0].length)&&(P.disabled=U)},i:h,o:h,d:function(t){t&&d(n),V(L,t),K=!1,D(j)}}}function ct(t,n,r){var e=n.tags,a=void 0===e?["landscape"]:e,c="";function i(t){var n=a.indexOf(String(t));console.log(t,n),a.splice(n,1),r(0,a)}return t.$set=function(t){"tags"in t&&r(0,a=t.tags)},[a,c,function(){console.log(c),a.includes(c)||(a.push(c),r(0,a)),r(1,c="")},i,function(){P("/tags?q="+JSON.stringify(a))},function(t){i(t)},function(){c=this.value,r(1,c)}]}var it=function(t){n(e,s);var r=nt(e);function e(t){var n;return a(this,e),n=r.call(this),c(o(n),t,ct,at,i,{tags:0}),n}return e}();function ot(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var i=r(this).constructor;a=Reflect.construct(c,arguments,i)}else a=c.apply(this,arguments);return e(this,a)}}function st(t){var n,r,e,a,c,i,o,s,u,f,p;return s=new tt({}),f=new it({}),{c:function(){n=T(),r=g("h1"),e=m("Miia Web!"),a=T(),c=g("p"),i=m("a web client for Hydrus"),o=T(),_(s.$$.fragment),u=T(),_(f.$$.fragment),this.h()},l:function(t){U('[data-svelte="svelte-1nj90w7"]',document.head).forEach(d),n=w(t),r=b(t,"H1",{});var l=E(r);e=k(l,"Miia Web!"),l.forEach(d),a=w(t),c=b(t,"P",{});var h=E(c);i=k(h,"a web client for Hydrus"),h.forEach(d),o=w(t),q(s.$$.fragment,t),u=w(t),q(f.$$.fragment,t),this.h()},h:function(){document.title="Miia Web"},m:function(t,h){l(t,n,h),l(t,r,h),S(r,e),l(t,a,h),l(t,c,h),S(c,i),l(t,o,h),C(s,t,h),l(t,u,h),C(f,t,h),p=!0},p:h,i:function(t){p||(H(s.$$.fragment,t),H(f.$$.fragment,t),p=!0)},o:function(t){B(s.$$.fragment,t),B(f.$$.fragment,t),p=!1},d:function(t){t&&d(n),t&&d(r),t&&d(a),t&&d(c),t&&d(o),J(s,t),t&&d(u),J(f,t)}}}function ut(t){return[]}var lt=function(t){n(e,s);var r=ot(e);function e(t){var n;return a(this,e),n=r.call(this),c(o(n),t,ut,st,i,{}),n}return e}();export default lt;
