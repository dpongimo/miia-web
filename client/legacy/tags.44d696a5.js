import{_ as n,a as t,b as r,c as e,i,s as c,d as o,S as a,Q as u,k as f,l as s,m as l,h,q as d,z as v,f as p,g as m,n as g,R as y,o as b,j as x,r as $,T as _,t as k,p as w,U as R,u as E,C as D,v as S,B as I,x as V,y as U,M as P,e as O,V as L,I as j,W as A,H as T,D as M,F as N,G as Q,J as H,X as z,Y as B,Z as C,$ as G,a0 as q,a1 as F,O as J}from"./client.6bfed319.js";import{G as W,I as Y,T as X}from"./TagSearch.333091af.js";function Z(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return new Promise((function(r){setTimeout(r.bind(null,t),n)}))}function K(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,c=t(n);if(e){var o=t(this).constructor;i=Reflect.construct(c,arguments,o)}else i=c.apply(this,arguments);return r(this,i)}}function nn(n){var t,r,e,i=n[13].message+"";return{c:function(){t=f("div"),r=f("pre"),e=k(i),this.h()},l:function(n){t=s(n,"DIV",{class:!0});var c=l(t);r=s(c,"PRE",{style:!0});var o=l(r);e=w(o,i),o.forEach(h),c.forEach(h),this.h()},h:function(){R(r,"color","red"),d(t,"class","card-body")},m:function(n,i){p(n,t,i),E(t,r),E(r,e)},p:function(n,t){1&t&&i!==(i=n[13].message+"")&&D(e,i)},d:function(n){n&&h(t)}}}function tn(n){var t,r,e,i;return{c:function(){t=f("img"),this.h()},l:function(n){t=s(n,"IMG",{src:!0,alt:!0,id:!0,class:!0}),this.h()},h:function(){t.src!==(r=URL.createObjectURL(n[12]))&&d(t,"src",r),d(t,"alt",n[0]),d(t,"id",n[0]),d(t,"class","svelte-1x1zhyt")},m:function(r,c){p(r,t,c),n[8](t),e||(i=[S(t,"load",n[4]),S(t,"click",n[5])],e=!0)},p:function(n,e){1&e&&t.src!==(r=URL.createObjectURL(n[12]))&&d(t,"src",r),1&e&&d(t,"alt",n[0]),1&e&&d(t,"id",n[0])},d:function(r){r&&h(t),n[8](null),e=!1,I(i)}}}function rn(n){var t,r,e,i,c,o;return{c:function(){t=f("div"),r=f("div"),e=V(),i=f("p"),c=k("Querying "),o=k(n[0]),this.h()},l:function(a){t=s(a,"DIV",{class:!0});var u=l(t);r=s(u,"DIV",{class:!0,role:!0,"aria-hidden":!0}),l(r).forEach(h),e=U(u),i=s(u,"P",{});var f=l(i);c=w(f,"Querying "),o=w(f,n[0]),f.forEach(h),u.forEach(h),this.h()},h:function(){d(r,"class","spinner-border"),d(r,"role","status"),d(r,"aria-hidden","true"),d(t,"class","card-body loading svelte-1x1zhyt")},m:function(n,a){p(n,t,a),E(t,r),E(t,e),E(t,i),E(i,c),E(i,o)},p:function(n,t){1&t&&D(o,n[0])},d:function(n){n&&h(t)}}}function en(n){var t,r,e={ctx:n,current:null,token:null,pending:rn,then:tn,catch:nn,value:12,error:13};return u(r=n[3](n[0]),e),{c:function(){t=f("div"),e.block.c(),this.h()},l:function(n){t=s(n,"DIV",{class:!0});var r=l(t);e.block.l(r),r.forEach(h),this.h()},h:function(){d(t,"class","card svelte-1x1zhyt"),v(t,"active",n[1])},m:function(n,r){p(n,t,r),e.block.m(t,e.anchor=null),e.mount=function(){return t},e.anchor=null},p:function(i,c){var o=m(c,1)[0];if(n=i,e.ctx=n,1&o&&r!==(r=n[3](n[0]))&&u(r,e));else{var a=n.slice();a[12]=e.resolved,e.block.p(a,o)}2&o&&v(t,"active",n[1])},i:g,o:g,d:function(n){n&&h(t),e.block.d(),e.token=null,e=null}}}function cn(n,t,r){var e,i=t.file_id,c=t.max_width,o=void 0===c?200:c,a=t.max_height,u=void 0===a?200:a,f=t.active,s=void 0!==f&&f,l=y();function h(){return(h=x($.mark((function n(t){var r;return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=W(),n.next=3,r.get_thumbnail({file_id:t});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return b(x($.mark((function n(){return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))),n.$set=function(n){"file_id"in n&&r(0,i=n.file_id),"max_width"in n&&r(6,o=n.max_width),"max_height"in n&&r(7,u=n.max_height),"active"in n&&r(1,s=n.active)},[i,s,e,function(n){return h.apply(this,arguments)},function(){var n,t,i,c,a,f=(n=e.naturalWidth,t=e.naturalHeight,i=o,c=u,a=Math.min(i/n,c/t),{width:n*a,height:t*a});r(2,e.width=f.width,e),r(2,e.height=f.height,e)},function(n){l("click",{source_event:n,file_id:i,dom_image:e})},o,u,function(n){_[n?"unshift":"push"]((function(){r(2,e=n)}))}]}var on=function(t){n(u,a);var r=K(u);function u(n){var t;return e(this,u),t=r.call(this),i(o(t),n,cn,en,c,{file_id:0,max_width:6,max_height:7,active:1}),t}return u}();function an(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,c=t(n);if(e){var o=t(this).constructor;i=Reflect.construct(c,arguments,o)}else i=c.apply(this,arguments);return r(this,i)}}function un(n){var t,r,e={ctx:n,current:null,token:null,pending:ln,then:sn,catch:fn,value:6,error:7};return u(r=n[2](n[0]),e),{c:function(){t=O(),e.block.c()},l:function(n){t=O(),e.block.l(n)},m:function(n,r){p(n,t,r),e.block.m(n,e.anchor=r),e.mount=function(){return t.parentNode},e.anchor=t},p:function(t,i){if(n=t,e.ctx=n,1&i&&r!==(r=n[2](n[0]))&&u(r,e));else{var c=n.slice();c[6]=e.resolved,e.block.p(c,i)}},d:function(n){n&&h(t),e.block.d(n),e.token=null,e=null}}}function fn(n){var t,r,e,i=n[7].message+"";return{c:function(){t=V(),r=f("pre"),e=k(i),this.h()},l:function(n){t=U(n),r=s(n,"PRE",{style:!0});var c=l(r);e=w(c,i),c.forEach(h),this.h()},h:function(){R(r,"color","red")},m:function(n,i){p(n,t,i),p(n,r,i),E(r,e)},p:function(n,t){1&t&&i!==(i=n[7].message+"")&&D(e,i)},d:function(n){n&&h(t),n&&h(r)}}}function sn(n){var t,r;return{c:function(){t=f("img"),this.h()},l:function(n){t=s(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h:function(){d(t,"class","img-fluid"),t.src!==(r=n[6])&&d(t,"src",r),d(t,"alt","")},m:function(n,r){p(n,t,r)},p:function(n,e){1&e&&t.src!==(r=n[6])&&d(t,"src",r)},d:function(n){n&&h(t)}}}function ln(n){var t,r;return{c:function(){t=f("div"),this.h()},l:function(n){t=s(n,"DIV",{class:!0,role:!0,title:!0,"aria-hidden":!0}),l(t).forEach(h),this.h()},h:function(){d(t,"class","spinner-border svelte-1imv7t1"),d(t,"role","status"),d(t,"title",r="Downloading "+n[0]),d(t,"aria-hidden","true")},m:function(n,r){p(n,t,r)},p:function(n,e){1&e&&r!==(r="Downloading "+n[0])&&d(t,"title",r)},d:function(n){n&&h(t)}}}function hn(n){var t,r="object"===P(n[1])&&Y(n[1].mime),e=r&&un(n);return{c:function(){e&&e.c(),t=O()},l:function(n){e&&e.l(n),t=O()},m:function(n,r){e&&e.m(n,r),p(n,t,r)},p:function(n,i){var c=m(i,1)[0];2&c&&(r="object"===P(n[1])&&Y(n[1].mime)),r?e?e.p(n,c):((e=un(n)).c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:g,o:g,d:function(n){e&&e.d(n),n&&h(t)}}}function dn(n,t,r){var e,i=t.file_id,c=t.metadata,o=t.file,a=void 0===o?null:o;function u(){return(u=x($.mark((function n(t){var o,u;return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&URL.revokeObjectURL(e),o=W(),n.next=4,o.get_file({file_id:i});case 4:return u=n.sent,r(3,a=new File([u],String(i)+c.ext,{type:c.mime})),e=URL.createObjectURL(a),n.abrupt("return",e);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return b(x($.mark((function n(){return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(function(){e&&URL.revokeObjectURL(e)}));case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"file_id"in n&&r(0,i=n.file_id),"metadata"in n&&r(1,c=n.metadata),"file"in n&&r(3,a=n.file)},[i,c,function(n){return u.apply(this,arguments)},a]}var vn=function(t){n(u,a);var r=an(u);function u(n){var t;return e(this,u),t=r.call(this),i(o(t),n,dn,hn,c,{file_id:0,metadata:1,file:3}),t}return u}();function pn(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,c=t(n);if(e){var o=t(this).constructor;i=Reflect.construct(c,arguments,o)}else i=c.apply(this,arguments);return r(this,i)}}function mn(n){var t,r,e,i,c,o,a,u,v,m,g,y,b,x=[yn,gn],$=[];function _(n,t){return"number"==typeof n[0]?0:1}i=_(n),c=$[i]=x[i](n);var R=n[0]>0&&_n(n),D=n[0]<n[2].length-1&&kn(n);return{c:function(){t=f("div"),r=f("div"),e=f("div"),c.c(),o=V(),R&&R.c(),a=V(),D&&D.c(),u=V(),v=f("button"),m=k("❌"),this.h()},l:function(n){t=s(n,"DIV",{class:!0});var i=l(t);r=s(i,"DIV",{class:!0});var f=l(r);e=s(f,"DIV",{class:!0});var d=l(e);c.l(d),d.forEach(h),f.forEach(h),o=U(i),R&&R.l(i),a=U(i),D&&D.l(i),u=U(i),v=s(i,"BUTTON",{class:!0});var p=l(v);m=w(p,"❌"),p.forEach(h),i.forEach(h),this.h()},h:function(){d(e,"class","image current svelte-70xrmp"),d(r,"class","images svelte-70xrmp"),d(v,"class","close svelte-70xrmp"),d(t,"class","background svelte-70xrmp")},m:function(c,f){p(c,t,f),E(t,r),E(r,e),$[i].m(e,null),E(t,o),R&&R.m(t,null),E(t,a),D&&D.m(t,null),E(t,u),E(t,v),E(v,m),g=!0,y||(b=S(v,"click",n[6]),y=!0)},p:function(n,r){var o=i;(i=_(n))===o?$[i].p(n,r):(L(),j($[o],1,1,(function(){$[o]=null})),A(),(c=$[i])||(c=$[i]=x[i](n)).c(),T(c,1),c.m(e,null)),n[0]>0?R?R.p(n,r):((R=_n(n)).c(),R.m(t,a)):R&&(R.d(1),R=null),n[0]<n[2].length-1?D?D.p(n,r):((D=kn(n)).c(),D.m(t,u)):D&&(D.d(1),D=null)},i:function(n){g||(T(c),g=!0)},o:function(n){j(c),g=!1},d:function(n){n&&h(t),$[i].d(),R&&R.d(),D&&D.d(),y=!1,b()}}}function gn(n){var t,r,e,i;return{c:function(){t=f("pre"),r=k("index ["),e=k(n[0]),i=k("] is not a number"),this.h()},l:function(c){t=s(c,"PRE",{style:!0});var o=l(t);r=w(o,"index ["),e=w(o,n[0]),i=w(o,"] is not a number"),o.forEach(h),this.h()},h:function(){R(t,"color","red")},m:function(n,c){p(n,t,c),E(t,r),E(t,e),E(t,i)},p:function(n,t){1&t&&D(e,n[0])},i:g,o:g,d:function(n){n&&h(t)}}}function yn(n){var t,r,e,i={ctx:n,current:null,token:null,pending:$n,then:xn,catch:bn,value:10,error:11,blocks:[,,,]};return u(r=n[3](n[2][n[0]]),i),{c:function(){t=O(),i.block.c()},l:function(n){t=O(),i.block.l(n)},m:function(n,r){p(n,t,r),i.block.m(n,i.anchor=r),i.mount=function(){return t.parentNode},i.anchor=t,e=!0},p:function(t,e){if(n=t,i.ctx=n,5&e&&r!==(r=n[3](n[2][n[0]]))&&u(r,i));else{var c=n.slice();c[10]=i.resolved,i.block.p(c,e)}},i:function(n){e||(T(i.block),e=!0)},o:function(n){for(var t=0;t<3;t+=1){var r=i.blocks[t];j(r)}e=!1},d:function(n){n&&h(t),i.block.d(n),i.token=null,i=null}}}function bn(n){var t,r,e,i,c,o,a,u,d,v,m,y,b,x,$,_,S=n[2].length+"",I=n[2][n[0]]+"",P=n[11].message+"";return{c:function(){t=f("p"),r=k("Querying\n              "),e=f("code"),i=k(n[0]),c=k("\n              of\n              "),o=f("code"),a=k("file_ids["),u=k(S),d=k("]"),v=V(),m=k(I),y=k("'s metadata"),b=V(),x=f("pre"),$=k(P),_=V(),this.h()},l:function(f){t=s(f,"P",{style:!0});var p=l(t);r=w(p,"Querying\n              "),e=s(p,"CODE",{});var g=l(e);i=w(g,n[0]),g.forEach(h),c=w(p,"\n              of\n              "),o=s(p,"CODE",{});var k=l(o);a=w(k,"file_ids["),u=w(k,S),d=w(k,"]"),k.forEach(h),v=U(p),m=w(p,I),y=w(p,"'s metadata"),p.forEach(h),b=U(f),x=s(f,"PRE",{style:!0});var R=l(x);$=w(R,P),R.forEach(h),_=U(f),this.h()},h:function(){R(t,"color","yellow"),R(x,"color","red")},m:function(n,f){p(n,t,f),E(t,r),E(t,e),E(e,i),E(t,c),E(t,o),E(o,a),E(o,u),E(o,d),E(t,v),E(t,m),E(t,y),p(n,b,f),p(n,x,f),E(x,$),p(n,_,f)},p:function(n,t){1&t&&D(i,n[0]),4&t&&S!==(S=n[2].length+"")&&D(u,S),5&t&&I!==(I=n[2][n[0]]+"")&&D(m,I),5&t&&P!==(P=n[11].message+"")&&D($,P)},i:g,o:g,d:function(n){n&&h(t),n&&h(b),n&&h(x),n&&h(_)}}}function xn(n){var t,r;return t=new vn({props:{file_id:n[2][n[0]],metadata:n[10]}}),{c:function(){M(t.$$.fragment)},l:function(n){N(t.$$.fragment,n)},m:function(n,e){Q(t,n,e),r=!0},p:function(n,r){var e={};5&r&&(e.file_id=n[2][n[0]]),5&r&&(e.metadata=n[10]),t.$set(e)},i:function(n){r||(T(t.$$.fragment,n),r=!0)},o:function(n){j(t.$$.fragment,n),r=!1},d:function(n){H(t,n)}}}function $n(n){var t,r;return{c:function(){t=f("div"),this.h()},l:function(n){t=s(n,"DIV",{class:!0,role:!0,title:!0}),l(t).forEach(h),this.h()},h:function(){d(t,"class","spinner-border svelte-70xrmp"),d(t,"role","status"),d(t,"title",r="Querying "+n[2][n[0]]+"'s metadata")},m:function(n,r){p(n,t,r)},p:function(n,e){5&e&&r!==(r="Querying "+n[2][n[0]]+"'s metadata")&&d(t,"title",r)},i:g,o:g,d:function(n){n&&h(t)}}}function _n(n){var t,r,e,i;return{c:function(){t=f("button"),r=k("◀"),this.h()},l:function(n){t=s(n,"BUTTON",{id:!0,class:!0});var e=l(t);r=w(e,"◀"),e.forEach(h),this.h()},h:function(){d(t,"id","previous"),d(t,"class","nav-buttons svelte-70xrmp")},m:function(c,o){p(c,t,o),E(t,r),e||(i=S(t,"click",n[4]),e=!0)},p:g,d:function(n){n&&h(t),e=!1,i()}}}function kn(n){var t,r,e,i;return{c:function(){t=f("button"),r=k("▶"),this.h()},l:function(n){t=s(n,"BUTTON",{id:!0,class:!0});var e=l(t);r=w(e,"▶"),e.forEach(h),this.h()},h:function(){d(t,"id","next"),d(t,"class","nav-buttons svelte-70xrmp")},m:function(c,o){p(c,t,o),E(t,r),e||(i=S(t,"click",n[5]),e=!0)},p:g,d:function(n){n&&h(t),e=!1,i()}}}function wn(n){var t,r,e=n[1]&&mn(n);return{c:function(){e&&e.c(),t=O()},l:function(n){e&&e.l(n),t=O()},m:function(n,i){e&&e.m(n,i),p(n,t,i),r=!0},p:function(n,r){var i=m(r,1)[0];n[1]?e?(e.p(n,i),2&i&&T(e,1)):((e=mn(n)).c(),T(e,1),e.m(t.parentNode,t)):e&&(L(),j(e,1,1,(function(){e=null})),A())},i:function(n){r||(T(e),r=!0)},o:function(n){j(e),r=!1},d:function(n){e&&e.d(n),n&&h(t)}}}function Rn(n,t,r){var e,i=t.file_ids,c=void 0===i?[]:i,o=t.index,a=void 0===o?0:o,u=t.enabled,f=void 0!==u&&u,s=new Map;function l(){return(l=x($.mark((function n(t){var r,i;return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s.has(t)){n.next=4;break}return n.abrupt("return",s.get(t));case 4:return e||(e=W()),n.next=7,e.get_file_metadata({file_ids:[t]});case 7:return r=n.sent,i=r.metadata,s.set(t,i[0]),n.abrupt("return",i[0]);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}b((function(){}));return n.$set=function(n){"file_ids"in n&&r(2,c=n.file_ids),"index"in n&&r(0,a=n.index),"enabled"in n&&r(1,f=n.enabled)},[a,f,c,function(n){return l.apply(this,arguments)},function(){r(0,a--,a)},function(){r(0,a++,a)},function(){r(1,f=!1)}]}var En=function(t){n(u,a);var r=pn(u);function u(n){var t;return e(this,u),t=r.call(this),i(o(t),n,Rn,wn,c,{file_ids:2,index:0,enabled:1}),t}return u}();function Dn(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,c=t(n);if(e){var o=t(this).constructor;i=Reflect.construct(c,arguments,o)}else i=c.apply(this,arguments);return r(this,i)}}function Sn(n,t){var r;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"==typeof n)return In(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return In(n,t)}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,a=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return o=n.done,n},e:function(n){a=!0,c=n},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw c}}}}function In(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var Vn=F.Map;function Un(n,t,r){var e=n.slice();return e[21]=t[r],e[23]=r,e}function Pn(n,t){var r,e,i,c=t[23];(e=new on({props:{file_id:t[21],active:t[0]==t[23]}})).$on("click",(function(){for(var n,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return(n=t)[12].apply(n,[t[23]].concat(e))}));var o=function(){return t[13](r,c)},a=function(){return t[13](null,c)};return{key:n,first:null,c:function(){r=f("div"),M(e.$$.fragment),this.h()},l:function(n){r=s(n,"DIV",{class:!0});var t=l(r);N(e.$$.fragment,t),t.forEach(h),this.h()},h:function(){d(r,"class","entry svelte-dgcmbo"),this.first=r},m:function(n,t){p(n,r,t),Q(e,r,null),o(),i=!0},p:function(n,r){t=n;var i={};4&r&&(i.file_id=t[21]),5&r&&(i.active=t[0]==t[23]),e.$set(i),c!==t[23]&&(a(),c=t[23],o())},i:function(n){i||(T(e.$$.fragment,n),i=!0)},o:function(n){j(e.$$.fragment,n),i=!1},d:function(n){n&&h(r),H(e),a()}}}function On(n){var t,r,e,i,c,o,a,u,v,g,y,b,x,$,R,I,P,O=[],q=new Vn,F=n[2].length+"",J=n[1].length+"";function W(t){n[9].call(null,t)}function Y(t){n[10].call(null,t)}function X(t){n[11].call(null,t)}var Z={};void 0!==n[0]&&(Z.index=n[0]),void 0!==n[5]&&(Z.enabled=n[5]),void 0!==n[2]&&(Z.file_ids=n[2]),t=new En({props:Z}),_.push((function(){return z(t,"index",W)})),_.push((function(){return z(t,"enabled",Y)})),_.push((function(){return z(t,"file_ids",X)}));for(var K=n[2],nn=function(n){return n[21]},tn=0;tn<K.length;tn+=1){var rn=Un(n,K,tn),en=nn(rn);q.set(en,O[tn]=Pn(en,rn))}return{c:function(){M(t.$$.fragment),c=V(),o=f("div");for(var n=0;n<O.length;n+=1)O[n].c();a=V(),u=f("div"),v=f("div"),g=f("span"),y=k("Loaded "),b=k(F),x=k(" / "),$=k(J),this.h()},l:function(n){N(t.$$.fragment,n),c=U(n),o=s(n,"DIV",{class:!0});for(var r=l(o),e=0;e<O.length;e+=1)O[e].l(r);a=U(r),u=s(r,"DIV",{class:!0});var i=l(u);v=s(i,"DIV",{class:!0});var f=l(v);g=s(f,"SPAN",{});var d=l(g);y=w(d,"Loaded "),b=w(d,F),x=w(d," / "),$=w(d,J),d.forEach(h),f.forEach(h),i.forEach(h),r.forEach(h),this.h()},h:function(){d(v,"class","alert alert-primary d-flex align-items-center"),d(u,"class","next-batch-placeholder svelte-dgcmbo"),d(o,"class","gallery")},m:function(r,e){Q(t,r,e),p(r,c,e),p(r,o,e);for(var i=0;i<O.length;i+=1)O[i].m(o,null);E(o,a),E(o,u),E(u,v),E(v,g),E(g,y),E(g,b),E(g,x),E(g,$),n[14](u),n[15](o),R=!0,I||(P=S(v,"click",n[7]),I=!0)},p:function(n,c){var u=m(c,1)[0],f={};if(!r&&1&u&&(r=!0,f.index=n[0],B((function(){return r=!1}))),!e&&32&u&&(e=!0,f.enabled=n[5],B((function(){return e=!1}))),!i&&4&u&&(i=!0,f.file_ids=n[2],B((function(){return i=!1}))),t.$set(f),45&u){var s=n[2];L(),O=C(O,u,nn,1,n,s,q,o,G,Pn,a,Un),A()}(!R||4&u)&&F!==(F=n[2].length+"")&&D(b,F),(!R||2&u)&&J!==(J=n[1].length+"")&&D($,J)},i:function(n){if(!R){T(t.$$.fragment,n);for(var r=0;r<K.length;r+=1)T(O[r]);R=!0}},o:function(n){j(t.$$.fragment,n);for(var r=0;r<O.length;r+=1)j(O[r]);R=!1},d:function(r){H(t,r),r&&h(c),r&&h(o);for(var e=0;e<O.length;e+=1)O[e].d();n[14](null),n[15](null),I=!1,P()}}}function Ln(n,t,r){var e,i,c=t.file_ids,o=void 0===c?[]:c,a=[],u=t.range,f=void 0===u?10:u,s=t.index,l=void 0===s?0:s,h=0,d=[],v=[],p=0,m=!1;function g(){if(o.length>0&&o.length!==d.length){var n=d.length,t=n+f-1,e=o.slice(n,Math.min(t,o.length));r(2,d=d.concat(e))}}function y(){return(y=x($.mark((function n(){return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.scrollHeight<window.innerHeight)){n.next=8;break}return g(),n.next=4,q();case 4:return n.next=6,Z(200);case 6:n.next=0;break;case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}b((function(){var n=new IntersectionObserver((function(n){var t,r=Sn(n);try{for(r.s();!(t=r.n()).done;){switch(t.value.target){case i:g()}}}catch(n){r.e(n)}finally{r.f()}}));return n.observe(i),function(){n.disconnect()}}));return n.$set=function(n){"file_ids"in n&&r(1,o=n.file_ids),"range"in n&&r(8,f=n.range),"index"in n&&r(0,l=n.index)},n.$$.update=function(){65538&n.$$.dirty&&o!==a&&(r(16,a=o),r(2,d=[])),262145&n.$$.dirty&&r(18,p=Math.max(l,p)),262150&n.$$.dirty&&p>=d.length-2&&o.length>0&&(0===d.length?function(){y.apply(this,arguments)}():g()),131083&n.$$.dirty&&o.length>0&&l!==h&&v&&v[l]&&(r(17,h=l),v[l].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))},[l,o,d,v,e,m,i,g,f,function(n){r(0,l=n)},function(n){r(5,m=n)},function(n){r(2,d=n),r(1,o),r(16,a)},function(n,t){r(0,l=n),r(5,m=!0)},function(n,t){v[t]!==n&&_[n?"unshift":"push"]((function(){v[t]=n,r(3,v),r(2,d),r(1,o),r(16,a)}))},function(n){_[n?"unshift":"push"]((function(){r(6,i=n)}))},function(n){_[n?"unshift":"push"]((function(){r(4,e=n)}))}]}var jn=function(t){n(u,a);var r=Dn(u);function u(n){var t;return e(this,u),t=r.call(this),i(o(t),n,Ln,On,c,{file_ids:1,range:8,index:0}),t}return u}();function An(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,c=t(n);if(e){var o=t(this).constructor;i=Reflect.construct(c,arguments,o)}else i=c.apply(this,arguments);return r(this,i)}}function Tn(n,t,r){var e=n.slice();return e[11]=t[r],e}function Mn(n){var t,r,e=n[11]+"";return{c:function(){t=f("span"),r=k(e),this.h()},l:function(n){t=s(n,"SPAN",{type:!0,class:!0});var i=l(t);r=w(i,e),i.forEach(h),this.h()},h:function(){d(t,"type","button"),d(t,"class","btn btn-secondary btn-sm")},m:function(n,e){p(n,t,e),E(t,r)},p:function(n,t){2&t&&e!==(e=n[11]+"")&&D(r,e)},d:function(n){n&&h(t)}}}function Nn(n){for(var t,r,e,i,c,o,a,u,v,g,y,b,x,$,R,D,S,I,P=n[1],O=[],L=0;L<P.length;L+=1)O[L]=Mn(Tn(n,P,L));function A(t){n[5].call(null,t)}$=new X({props:{tags:n[1],onSearch:n[4]}});var C={};return void 0!==n[0]&&(C.file_ids=n[0]),D=new jn({props:C}),_.push((function(){return z(D,"file_ids",A)})),{c:function(){t=f("h1"),r=k("Search Results for"),e=V(),i=f("div"),c=V(),o=f("div"),a=f("details"),u=f("summary"),v=f("span"),g=k("Search:"),y=V();for(var n=0;n<O.length;n+=1)O[n].c();b=V(),x=f("div"),M($.$$.fragment),R=V(),M(D.$$.fragment),this.h()},l:function(n){t=s(n,"H1",{});var f=l(t);r=w(f,"Search Results for"),f.forEach(h),e=U(n),i=s(n,"DIV",{class:!0}),l(i).forEach(h),c=U(n),o=s(n,"DIV",{class:!0});var d=l(o);a=s(d,"DETAILS",{});var p=l(a);u=s(p,"SUMMARY",{class:!0});var m=l(u);v=s(m,"SPAN",{});var _=l(v);g=w(_,"Search:"),_.forEach(h),y=U(m);for(var k=0;k<O.length;k+=1)O[k].l(m);m.forEach(h),b=U(p),x=s(p,"DIV",{class:!0});var E=l(x);N($.$$.fragment,E),E.forEach(h),p.forEach(h),d.forEach(h),R=U(n),N(D.$$.fragment,n),this.h()},h:function(){d(i,"class","tags"),d(u,"class","card-header"),d(x,"class","card-body"),d(o,"class","card")},m:function(f,s){p(f,t,s),E(t,r),p(f,e,s),p(f,i,s),n[3](i),p(f,c,s),p(f,o,s),E(o,a),E(a,u),E(u,v),E(v,g),E(u,y);for(var l=0;l<O.length;l+=1)O[l].m(u,null);E(a,b),E(a,x),Q($,x,null),p(f,R,s),Q(D,f,s),I=!0},p:function(n,t){var r=m(t,1)[0];if(2&r){var e;for(P=n[1],e=0;e<P.length;e+=1){var i=Tn(n,P,e);O[e]?O[e].p(i,r):(O[e]=Mn(i),O[e].c(),O[e].m(u,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=P.length}var c={};2&r&&(c.tags=n[1]),2&r&&(c.onSearch=n[4]),$.$set(c);var o={};!S&&1&r&&(S=!0,o.file_ids=n[0],B((function(){return S=!1}))),D.$set(o)},i:function(n){I||(T($.$$.fragment,n),T(D.$$.fragment,n),I=!0)},o:function(n){j($.$$.fragment,n),j(D.$$.fragment,n),I=!1},d:function(r){r&&h(t),r&&h(e),r&&h(i),n[3](null),r&&h(c),r&&h(o),J(O,r),H($),r&&h(R),H(D,r)}}}function Qn(n,t,r){var e,i=[],c=[];function o(){return(o=x($.mark((function n(t){var c,o;return $.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return c=W(),n.next=4,c.search_files(t,!0,!0);case 4:o=n.sent,r(0,i=o.file_ids);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}b((function(){var n=window.location.search,t=new URLSearchParams(n),e=t.get("q");if(e){var i=JSON.parse(e);r(1,c=i)}t.get("id")}));return n.$$.update=function(){2&n.$$.dirty&&(console.log("update!!"),function(n){o.apply(this,arguments)}(c))},[i,c,e,function(n){_[n?"unshift":"push"]((function(){r(2,e=n)}))},function(n){console.log("tags set"),r(1,c=n)},function(n){r(0,i=n)}]}var Hn=function(t){n(u,a);var r=An(u);function u(n){var t;return e(this,u),t=r.call(this),i(o(t),n,Qn,Nn,c,{}),t}return u}();export default Hn;
