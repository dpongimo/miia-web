import{w as n,_ as t,a as r,b as e,c as a,i as c,s,d as o,S as i,e as u,f,g as l,n as p,h,o as d,j as v,r as m,k as y,t as b,l as g,m as k,p as x,q as w,u as E,v as S,x as $,y as I,z as R,A as N,B as T,C as _,D,E as V,F as O,G as P,H as C,I as H,J as U}from"./client.6bfed319.js";import{G as J,r as q,T as M}from"./TagSearch.333091af.js";var j=n("No Error"),B=n(!1);function K(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var a,c=r(n);if(t){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function G(n){var t,r,e,a,c,s,o,i,u,l=!n[1]&&A(n);return{c:function(){t=y("div"),l&&l.c(),r=$(),e=y("div"),a=y("input"),c=$(),s=y("button"),o=b("Validate Manual Key"),this.h()},l:function(n){t=g(n,"DIV",{id:!0});var i=k(t);l&&l.l(i),r=I(i),e=g(i,"DIV",{class:!0});var u=k(e);a=g(u,"INPUT",{class:!0,type:!0}),c=I(u),s=g(u,"BUTTON",{class:!0});var f=k(s);o=x(f,"Validate Manual Key"),f.forEach(h),u.forEach(h),i.forEach(h),this.h()},h:function(){w(a,"class","form-control"),w(a,"type","password"),w(s,"class","btn"),R(s,"btn-secondary",!n[1]),R(s,"btn-primary",!!n[1]),w(e,"class","add-manual-key input-group"),w(t,"id","connect-key")},m:function(p,h){f(p,t,h),l&&l.m(t,null),E(t,r),E(t,e),E(e,a),N(a,n[2]),E(e,c),E(e,s),E(s,o),i||(u=[S(a,"input",n[10]),S(s,"click",n[11])],i=!0)},p:function(n,e){n[1]?l&&(l.d(1),l=null):l?l.p(n,e):((l=A(n)).c(),l.m(t,r)),4&e&&a.value!==n[2]&&N(a,n[2]),2&e&&R(s,"btn-secondary",!n[1]),2&e&&R(s,"btn-primary",!!n[1])},d:function(n){n&&h(t),l&&l.d(),i=!1,T(u)}}}function W(n){var t,r,e,a,c,s,o,i,u,l,p,d=n[3]&&L(n);return{c:function(){t=y("div"),r=y("p"),e=b("Hydrus Client URL"),a=$(),c=y("input"),s=$(),o=y("button"),i=b("Connect"),u=$(),d&&d.c(),this.h()},l:function(n){t=g(n,"DIV",{id:!0});var f=k(t);r=g(f,"P",{});var l=k(r);e=x(l,"Hydrus Client URL"),l.forEach(h),a=I(f),c=g(f,"INPUT",{}),s=I(f),o=g(f,"BUTTON",{class:!0});var p=k(o);i=x(p,"Connect"),p.forEach(h),u=I(f),d&&d.l(f),f.forEach(h),this.h()},h:function(){w(o,"class","btn btn-primary"),R(o,"disabled",n[3]),w(t,"id","connect-address")},m:function(h,v){f(h,t,v),E(t,r),E(r,e),E(t,a),E(t,c),N(c,n[0]),E(t,s),E(t,o),E(o,i),E(t,u),d&&d.m(t,null),l||(p=[S(c,"input",n[9]),S(o,"click",n[6])],l=!0)},p:function(n,r){1&r&&c.value!==n[0]&&N(c,n[0]),8&r&&R(o,"disabled",n[3]),n[3]?d?d.p(n,r):((d=L(n)).c(),d.m(t,null)):d&&(d.d(1),d=null)},d:function(n){n&&h(t),d&&d.d(),l=!1,T(p)}}}function A(n){var t,r,e,a,c;return{c:function(){t=y("div"),r=y("button"),e=b("Request Temporary Key"),this.h()},l:function(n){t=g(n,"DIV",{class:!0});var a=k(t);r=g(a,"BUTTON",{class:!0});var c=k(r);e=x(c,"Request Temporary Key"),c.forEach(h),a.forEach(h),this.h()},h:function(){w(r,"class","btn btn-primary"),w(t,"class","request-new-key")},m:function(s,o){f(s,t,o),E(t,r),E(r,e),a||(c=S(r,"click",n[7]),a=!0)},p:p,d:function(n){n&&h(t),a=!1,c()}}}function L(n){var t,r,e,a,c=!n[4]&&z(n),s=!n[5]&&!!n[1]&&F();return{c:function(){t=y("div"),r=y("div"),e=$(),c&&c.c(),a=$(),s&&s.c(),this.h()},l:function(n){t=g(n,"DIV",{class:!0,role:!0});var o=k(t);r=g(o,"DIV",{class:!0,role:!0,"aria-hidden":!0}),k(r).forEach(h),e=I(o),c&&c.l(o),a=I(o),s&&s.l(o),o.forEach(h),this.h()},h:function(){w(r,"class","spinner-border"),w(r,"role","status"),w(r,"aria-hidden","true"),w(t,"class","alert alert-primary d-flex align-items-left"),w(t,"role","alert")},m:function(n,o){f(n,t,o),E(t,r),E(t,e),c&&c.m(t,null),E(t,a),s&&s.m(t,null)},p:function(n,r){n[4]?c&&(c.d(1),c=null):c?c.p(n,r):((c=z(n)).c(),c.m(t,a)),!n[5]&&n[1]?s||((s=F()).c(),s.m(t,null)):s&&(s.d(1),s=null)},d:function(n){n&&h(t),c&&c.d(),s&&s.d()}}}function z(n){var t,r,e,a,c;return{c:function(){t=y("p"),r=b("Connecting to\n            "),e=y("strong"),a=b(n[0]),c=b("\n            ...")},l:function(s){t=g(s,"P",{});var o=k(t);r=x(o,"Connecting to\n            "),e=g(o,"STRONG",{});var i=k(e);a=x(i,n[0]),i.forEach(h),c=x(o,"\n            ..."),o.forEach(h)},m:function(n,s){f(n,t,s),E(t,r),E(t,e),E(e,a),E(t,c)},p:function(n,t){1&t&&_(a,n[0])},d:function(n){n&&h(t)}}}function F(n){var t,r;return{c:function(){t=y("p"),r=b("Validating key...")},l:function(n){t=g(n,"P",{});var e=k(t);r=x(e,"Validating key..."),e.forEach(h)},m:function(n,e){f(n,t,e),E(t,r)},d:function(n){n&&h(t)}}}function Q(n){var t;function r(n,t){return n[4]?n[5]?void 0:G:W}var e=r(n),a=e&&e(n);return{c:function(){a&&a.c(),t=u()},l:function(n){a&&a.l(n),t=u()},m:function(n,r){a&&a.m(n,r),f(n,t,r)},p:function(n,c){var s=l(c,1)[0];e===(e=r(n))&&a?a.p(n,s):(a&&a.d(1),(a=e&&e(n))&&(a.c(),a.m(t.parentNode,t)))},i:p,o:p,d:function(n){a&&a.d(n),n&&h(t)}}}function X(n,t,r){var e="http://127.0.0.1:45869",a="",c="",s=!1,o=!1,i=!1;function u(){return f.apply(this,arguments)}function f(){return(f=v(m.mark((function n(){var t,c,i;return m.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s){n.next=2;break}return n.abrupt("return");case 2:return r(3,s=!0),t=J(e),n.prev=4,n.next=7,t.api_version();case 7:if(c=n.sent,i=c.version,console.log("Connected with API version: ".concat(i)),localStorage.setItem("address",JSON.stringify(e)),r(4,o=!0),!a){n.next=15;break}return n.next=15,p();case 15:n.next=22;break;case 17:n.prev=17,n.t0=n.catch(4),console.error(n.t0),j.set(n.t0),B.set(!1);case 22:r(3,s=!1);case 23:case"end":return n.stop()}}),n,null,[[4,17]])})))).apply(this,arguments)}function l(){return(l=v(m.mark((function n(){var t,e,s;return m.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=J(),n.prev=1,n.next=4,t.request_new_permissions("miia-web",q);case 4:e=n.sent,s=e.access_key,localStorage.setItem("access_key",JSON.stringify(a)),r(1,a=s),r(2,c=a),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=v(m.mark((function n(){var t,e,c;return m.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(3,s=!0),(t=J()).access_key=a,n.prev=3,n.next=6,t.verify_access_key(a);case 6:e=n.sent,c=e.human_description,localStorage.setItem("access_key",JSON.stringify(a)),console.log(c),r(5,i=!0),B.set(!0),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.error(n.t0);case 17:r(3,s=!1);case 18:case"end":return n.stop()}}),n,null,[[3,14]])})))).apply(this,arguments)}d((function(){var n=localStorage.getItem("address");n&&r(0,e=JSON.parse(n));var t=localStorage.getItem("access_key");t&&r(1,a=JSON.parse(t)),v(m.mark((function t(){return m.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return t.prev=1,t.next=4,u();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()}));return[e,a,c,s,o,i,u,function(){return l.apply(this,arguments)},p,function(){e=this.value,r(0,e)},function(){c=this.value,r(2,c)},function(){r(1,a=c),p()}]}var Y=function(n){t(e,i);var r=K(e);function e(n){var t;return a(this,e),t=r.call(this),c(o(t),n,X,Q,s,{}),t}return e}();function Z(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var a,c=r(n);if(t){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function nn(n){var t,r,e,a,c,s,o,i,u,l,d,v,m,w;return i=new Y({}),m=new M({}),{c:function(){t=$(),r=y("h1"),e=b("Miia Web!"),a=$(),c=y("p"),s=b("a web client for Hydrus"),o=$(),D(i.$$.fragment),u=$(),l=y("h2"),d=b("Search"),v=$(),D(m.$$.fragment),this.h()},l:function(n){V('[data-svelte="svelte-1nj90w7"]',document.head).forEach(h),t=I(n),r=g(n,"H1",{});var f=k(r);e=x(f,"Miia Web!"),f.forEach(h),a=I(n),c=g(n,"P",{});var p=k(c);s=x(p,"a web client for Hydrus"),p.forEach(h),o=I(n),O(i.$$.fragment,n),u=I(n),l=g(n,"H2",{});var y=k(l);d=x(y,"Search"),y.forEach(h),v=I(n),O(m.$$.fragment,n),this.h()},h:function(){document.title="Miia Web"},m:function(n,p){f(n,t,p),f(n,r,p),E(r,e),f(n,a,p),f(n,c,p),E(c,s),f(n,o,p),P(i,n,p),f(n,u,p),f(n,l,p),E(l,d),f(n,v,p),P(m,n,p),w=!0},p:p,i:function(n){w||(C(i.$$.fragment,n),C(m.$$.fragment,n),w=!0)},o:function(n){H(i.$$.fragment,n),H(m.$$.fragment,n),w=!1},d:function(n){n&&h(t),n&&h(r),n&&h(a),n&&h(c),n&&h(o),U(i,n),n&&h(u),n&&h(l),n&&h(v),U(m,n)}}}function tn(n){return[]}var rn=function(n){t(e,i);var r=Z(e);function e(n){var t;return a(this,e),t=r.call(this),c(o(t),n,tn,nn,s,{}),t}return e}();export default rn;
