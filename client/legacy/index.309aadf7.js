import{w as t,_ as n,a as r,b as e,c as a,i as c,s,d as i,S as o,e as u,f as l,g as f,h as d,j as h,k as p,l as v,n as m,o as y,m as b,r as g,t as $,p as E,q as k,u as w,v as x,x as I,y as S,z as R,A as T,B as N,C,D,E as H,F as V,G as O,H as P,I as _,J as U,K as L}from"./client.19c3c8e8.js";import{G as A,r as B,P as J,T as q}from"./TagSearch.56995f2f.js";var K=t("No Error"),M=t(!1);function j(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function F(t){var n,r,e,a,c,s,i,o,v,m,y,b,g,C,D,H=!t[1]&&W(t);return{c:function(){n=u("form"),r=u("label"),e=$("Hydrus Client URL"),a=x(),c=u("div"),H&&H.c(),s=x(),i=u("input"),o=x(),v=u("button"),m=$("Validate Key"),y=x(),b=u("div"),g=$("The generated API key from your Hydrus Client"),this.h()},l:function(t){n=l(t,"FORM",{id:!0});var u=f(n);r=l(u,"LABEL",{for:!0,class:!0});var h=f(r);e=E(h,"Hydrus Client URL"),h.forEach(d),a=I(u),c=l(u,"DIV",{class:!0});var p=f(c);H&&H.l(p),s=I(p),i=l(p,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),o=I(p),v=l(p,"BUTTON",{class:!0,type:!0});var $=f(v);m=E($,"Validate Key"),$.forEach(d),p.forEach(d),y=I(u),b=l(u,"DIV",{id:!0,class:!0});var k=f(b);g=E(k,"The generated API key from your Hydrus Client"),k.forEach(d),u.forEach(d),this.h()},h:function(){h(r,"for","key-input"),h(r,"class","form-label"),h(i,"id","key-input"),h(i,"class","form-control"),h(i,"type","password"),h(i,"aria-describedby","key-help"),h(v,"class","btn"),h(v,"type","submit"),S(v,"btn-secondary",!t[1]),S(v,"btn-primary",!!t[1]),h(c,"class","input-group"),h(b,"id","key-help"),h(b,"class","form-text"),h(n,"id","connect-key")},m:function(u,l){p(u,n,l),k(n,r),k(r,e),k(n,a),k(n,c),H&&H.m(c,null),k(c,s),k(c,i),R(i,t[2]),k(c,o),k(c,v),k(v,m),k(n,y),k(n,b),k(b,g),C||(D=[w(i,"input",t[12]),w(n,"submit",T(t[13]))],C=!0)},p:function(t,n){t[1]?H&&(H.d(1),H=null):H?H.p(t,n):((H=W(t)).c(),H.m(c,s)),4&n&&i.value!==t[2]&&R(i,t[2]),2&n&&S(v,"btn-secondary",!t[1]),2&n&&S(v,"btn-primary",!!t[1])},d:function(t){t&&d(n),H&&H.d(),C=!1,N(D)}}}function G(t){var n,r,e,a,c,s,i,o,v,m,y,b,g,C,H,V,O,P=t[3]&&z(t),_=t[4].length>0&&Y(t);return{c:function(){n=u("form"),r=u("label"),e=$("Hydrus Client URL"),a=x(),c=u("div"),s=u("input"),i=x(),o=u("button"),v=$("Connect"),m=x(),y=u("div"),b=$("The IP address or domain and port of your Hydrus Client"),g=x(),P&&P.c(),C=x(),_&&_.c(),H=D(),this.h()},l:function(t){n=l(t,"FORM",{id:!0});var u=f(n);r=l(u,"LABEL",{for:!0,class:!0});var h=f(r);e=E(h,"Hydrus Client URL"),h.forEach(d),a=I(u),c=l(u,"DIV",{class:!0});var p=f(c);s=l(p,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),i=I(p),o=l(p,"BUTTON",{class:!0,type:!0,disabled:!0});var $=f(o);v=E($,"Connect"),$.forEach(d),p.forEach(d),m=I(u),y=l(u,"DIV",{id:!0,class:!0});var k=f(y);b=E(k,"The IP address or domain and port of your Hydrus Client"),k.forEach(d),u.forEach(d),g=I(t),P&&P.l(t),C=I(t),_&&_.l(t),H=D(),this.h()},h:function(){h(r,"for","url-input"),h(r,"class","form-label"),h(s,"id","url-input"),h(s,"class","form-control"),h(s,"type","url"),h(s,"aria-describedby","url-help"),h(o,"class","btn btn-primary"),h(o,"type","submit"),o.disabled=t[3],S(o,"disabled",t[3]),h(c,"class","input-group"),h(y,"id","url-help"),h(y,"class","form-text"),h(n,"id","connect-address input-group")},m:function(u,l){p(u,n,l),k(n,r),k(r,e),k(n,a),k(n,c),k(c,s),R(s,t[0]),k(c,i),k(c,o),k(o,v),k(n,m),k(n,y),k(y,b),p(u,g,l),P&&P.m(u,l),p(u,C,l),_&&_.m(u,l),p(u,H,l),V||(O=[w(s,"input",t[10]),w(o,"click",t[7]),w(n,"submit",T(t[7]))],V=!0)},p:function(t,n){1&n&&R(s,t[0]),8&n&&(o.disabled=t[3]),8&n&&S(o,"disabled",t[3]),t[3]?P?P.p(t,n):((P=z(t)).c(),P.m(C.parentNode,C)):P&&(P.d(1),P=null),t[4].length>0?_?_.p(t,n):((_=Y(t)).c(),_.m(H.parentNode,H)):_&&(_.d(1),_=null)},d:function(t){t&&d(n),t&&d(g),P&&P.d(t),t&&d(C),_&&_.d(t),t&&d(H),V=!1,N(O)}}}function W(t){var n,r,e,a,c;return{c:function(){n=u("div"),r=u("button"),e=$("Request Temporary Key"),this.h()},l:function(t){n=l(t,"DIV",{class:!0});var a=f(n);r=l(a,"BUTTON",{class:!0});var c=f(r);e=E(c,"Request Temporary Key"),c.forEach(d),a.forEach(d),this.h()},h:function(){h(r,"class","btn btn-primary"),h(n,"class","request-new-key")},m:function(s,i){p(s,n,i),k(n,r),k(r,e),a||(c=w(r,"click",t[8]),a=!0)},p:m,d:function(t){t&&d(n),a=!1,c()}}}function z(t){var n,r,e,a,c=!t[5]&&Q(t),s=!t[6]&&!!t[1]&&X();return{c:function(){n=u("div"),r=u("div"),e=x(),c&&c.c(),a=x(),s&&s.c(),this.h()},l:function(t){n=l(t,"DIV",{class:!0,role:!0});var i=f(n);r=l(i,"DIV",{class:!0,role:!0,"aria-hidden":!0}),f(r).forEach(d),e=I(i),c&&c.l(i),a=I(i),s&&s.l(i),i.forEach(d),this.h()},h:function(){h(r,"class","spinner-border"),h(r,"role","status"),h(r,"aria-hidden","true"),h(n,"class","alert alert-primary d-flex align-items-left"),h(n,"role","alert")},m:function(t,i){p(t,n,i),k(n,r),k(n,e),c&&c.m(n,null),k(n,a),s&&s.m(n,null)},p:function(t,r){t[5]?c&&(c.d(1),c=null):c?c.p(t,r):((c=Q(t)).c(),c.m(n,a)),!t[6]&&t[1]?s||((s=X()).c(),s.m(n,null)):s&&(s.d(1),s=null)},d:function(t){t&&d(n),c&&c.d(),s&&s.d()}}}function Q(t){var n,r,e,a,c;return{c:function(){n=u("p"),r=$("Connecting to\n            "),e=u("strong"),a=$(t[0]),c=$("\n            ...")},l:function(s){n=l(s,"P",{});var i=f(n);r=E(i,"Connecting to\n            "),e=l(i,"STRONG",{});var o=f(e);a=E(o,t[0]),o.forEach(d),c=E(i,"\n            ..."),i.forEach(d)},m:function(t,s){p(t,n,s),k(n,r),k(n,e),k(e,a),k(n,c)},p:function(t,n){1&n&&C(a,t[0])},d:function(t){t&&d(n)}}}function X(t){var n,r;return{c:function(){n=u("p"),r=$("Validating key...")},l:function(t){n=l(t,"P",{});var e=f(n);r=E(e,"Validating key..."),e.forEach(d)},m:function(t,e){p(t,n,e),k(n,r)},d:function(t){t&&d(n)}}}function Y(t){var n,r,e,a,c,s,i,o,v,m,y,b,g,S,R,T=t[5]?"while validating your key":"while connecting";return{c:function(){n=u("div"),r=u("h4"),e=$("Error "),a=$(T),c=x(),s=u("hr"),i=x(),o=u("code"),v=$(t[4]),m=x(),y=u("button"),b=u("span"),g=$("×"),this.h()},l:function(u){n=l(u,"DIV",{class:!0,role:!0});var h=f(n);r=l(h,"H4",{class:!0});var p=f(r);e=E(p,"Error "),a=E(p,T),p.forEach(d),c=I(h),s=l(h,"HR",{}),i=I(h),o=l(h,"CODE",{class:!0});var $=f(o);v=E($,t[4]),$.forEach(d),m=I(h),y=l(h,"BUTTON",{type:!0,class:!0,"data-dismiss":!0,"aria-label":!0});var k=f(y);b=l(k,"SPAN",{"aria-hidden":!0});var w=f(b);g=E(w,"×"),w.forEach(d),k.forEach(d),h.forEach(d),this.h()},h:function(){h(r,"class","alert-heading"),h(o,"class","mb-0"),h(b,"aria-hidden","true"),h(y,"type","button"),h(y,"class","close"),h(y,"data-dismiss","alert"),h(y,"aria-label","Close"),h(n,"class","alert alert-danger alert-dismissible fade show"),h(n,"role","alert")},m:function(u,l){p(u,n,l),k(n,r),k(r,e),k(r,a),k(n,c),k(n,s),k(n,i),k(n,o),k(o,v),k(n,m),k(n,y),k(y,b),k(b,g),S||(R=w(y,"click",t[11]),S=!0)},p:function(t,n){32&n&&T!==(T=t[5]?"while validating your key":"while connecting")&&C(a,T),16&n&&C(v,t[4])},d:function(t){t&&d(n),S=!1,R()}}}function Z(t){var n;function r(t,n){return t[5]?t[6]?void 0:F:G}var e=r(t),a=e&&e(t);return{c:function(){n=u("section"),a&&a.c(),this.h()},l:function(t){n=l(t,"SECTION",{class:!0});var r=f(n);a&&a.l(r),r.forEach(d),this.h()},h:function(){h(n,"class","container")},m:function(t,r){p(t,n,r),a&&a.m(n,null)},p:function(t,c){var s=v(c,1)[0];e===(e=r(t))&&a?a.p(t,s):(a&&a.d(1),(a=e&&e(t))&&(a.c(),a.m(n,null)))},i:m,o:m,d:function(t){t&&d(n),a&&a.d()}}}function tt(t,n,r){var e="http://127.0.0.1:45869",a="",c="",s=!1,i="",o=!1,u=!1;function l(){return f.apply(this,arguments)}function f(){return(f=b(g.mark((function t(){var n,c,u;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return r(4,i=""),r(3,s=!0),n=A(e),t.prev=5,t.next=8,n.api_version();case 8:if(c=t.sent,u=c.version,console.log("Connected with API version: ".concat(u)),localStorage.setItem("address",JSON.stringify(e)),r(5,o=!0),!a){t.next=16;break}return t.next=16,p();case 16:t.next=24;break;case 18:t.prev=18,t.t0=t.catch(5),console.error(t.t0),K.set(t.t0),M.set(!1),r(4,i=String(t.t0));case 24:r(3,s=!1);case 25:case"end":return t.stop()}}),t,null,[[5,18]])})))).apply(this,arguments)}function d(){return h.apply(this,arguments)}function h(){return(h=b(g.mark((function t(){var n,e,s;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=A(),r(4,i=""),t.prev=2,t.next=5,n.request_new_permissions("miia-web",B);case 5:e=t.sent,s=e.access_key,localStorage.setItem("access_key",JSON.stringify(a)),r(1,a=s),r(2,c=a),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0),r(4,i=String(t.t0));case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=b(g.mark((function t(){var n,e,c;return g.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(3,s=!0),(n=A()).access_key=a,r(4,i=""),t.prev=4,t.next=7,n.verify_access_key(a);case 7:e=t.sent,c=e.human_description,localStorage.setItem("access_key",JSON.stringify(a)),console.log(c),r(6,u=!0),M.set(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),console.error(t.t0),r(4,i=String(t.t0));case 19:r(3,s=!1);case 20:case"end":return t.stop()}}),t,null,[[4,15]])})))).apply(this,arguments)}y((function(){var t=localStorage.getItem("address");t&&r(0,e=JSON.parse(t));var n=localStorage.getItem("access_key");n&&r(1,a=JSON.parse(n)),b(g.mark((function n(){return g.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}return n.prev=1,n.next=4,l();case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0),r(4,i=String(n.t0));case 10:case"end":return n.stop()}}),n,null,[[1,6]])})))()}));return[e,a,c,s,i,o,u,l,d,p,function(){e=this.value,r(0,e)},function(){r(4,i="")},function(){c=this.value,r(2,c)},function(){c?(r(1,a=c),p()):d()}]}var nt=function(t){n(e,o);var r=j(e);function e(t){var n;return a(this,e),n=r.call(this),c(i(n),t,tt,Z,s,{}),n}return e}();function rt(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function et(t){var n,r,e,a,c,s;return{c:function(){n=u("div"),r=u("h1"),e=$("Miia Web!"),a=x(),c=u("p"),s=$("a web client for Hydrus"),this.h()},l:function(t){n=l(t,"DIV",{class:!0});var i=f(n);r=l(i,"H1",{});var o=f(r);e=E(o,"Miia Web!"),o.forEach(d),a=I(i),c=l(i,"P",{});var u=f(c);s=E(u,"a web client for Hydrus"),u.forEach(d),i.forEach(d),this.h()},h:function(){h(n,"class","col")},m:function(t,i){p(t,n,i),k(n,r),k(r,e),k(n,a),k(n,c),k(c,s)},d:function(t){t&&d(n)}}}function at(t){var n,r,e,a,c,s,i,o,v;return r=new nt({}),o=new q({}),{c:function(){n=u("div"),H(r.$$.fragment),e=x(),a=u("div"),c=u("h2"),s=$("New Search"),i=x(),H(o.$$.fragment),this.h()},l:function(t){n=l(t,"DIV",{class:!0});var u=f(n);O(r.$$.fragment,u),u.forEach(d),e=I(t),a=l(t,"DIV",{class:!0});var h=f(a);c=l(h,"H2",{});var p=f(c);s=E(p,"New Search"),p.forEach(d),i=I(h),O(o.$$.fragment,h),h.forEach(d),this.h()},h:function(){h(n,"class","col col-12"),h(a,"class","col col-12")},m:function(t,u){p(t,n,u),P(r,n,null),p(t,e,u),p(t,a,u),k(a,c),k(c,s),k(a,i),P(o,a,null),v=!0},i:function(t){v||(_(r.$$.fragment,t),_(o.$$.fragment,t),v=!0)},o:function(t){U(r.$$.fragment,t),U(o.$$.fragment,t),v=!1},d:function(t){t&&d(n),L(r),t&&d(e),t&&d(a),L(o)}}}function ct(t){var n,r,e,a,c;return r=new J({props:{$$slots:{default:[et]},$$scope:{ctx:t}}}),a=new J({props:{$$slots:{default:[at]},$$scope:{ctx:t}}}),{c:function(){n=x(),H(r.$$.fragment),e=x(),H(a.$$.fragment),this.h()},l:function(t){V('[data-svelte="svelte-1nj90w7"]',document.head).forEach(d),n=I(t),O(r.$$.fragment,t),e=I(t),O(a.$$.fragment,t),this.h()},h:function(){document.title="Miia Web"},m:function(t,s){p(t,n,s),P(r,t,s),p(t,e,s),P(a,t,s),c=!0},p:function(t,n){var e=v(n,1)[0],c={};2&e&&(c.$$scope={dirty:e,ctx:t}),r.$set(c);var s={};2&e&&(s.$$scope={dirty:e,ctx:t}),a.$set(s)},i:function(t){c||(_(r.$$.fragment,t),_(a.$$.fragment,t),c=!0)},o:function(t){U(r.$$.fragment,t),U(a.$$.fragment,t),c=!1},d:function(t){t&&d(n),L(r,t),t&&d(e),L(a,t)}}}function st(t){return[]}var it=function(t){n(e,o);var r=rt(e);function e(t){var n;return a(this,e),n=r.call(this),c(i(n),t,st,ct,s,{}),n}return e}();export default it;
