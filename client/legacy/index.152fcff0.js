import{w as t,_ as n,a as r,b as e,c as a,i as c,s,d as i,S as o,e as u,f as l,g as f,n as d,h,o as p,j as v,r as y,k as m,t as b,l as g,m as k,p as E,q as w,u as x,v as S,x as I,y as R,z as T,A as N,B as C,C as $,D as H,E as D,F as O,G as P,H as V,I as _,J as U,K as L}from"./client.372b7e30.js";import{G as A,r as B,T as J}from"./TagSearch.e323e36d.js";var q=t("No Error"),K=t(!1);function M(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function j(t){var n,r,e,a,c,s,i,o,u,f,d,p,v,y,$,H=!t[1]&&G(t);return{c:function(){n=m("form"),r=m("label"),e=b("Hydrus Client URL"),a=I(),c=m("div"),H&&H.c(),s=I(),i=m("input"),o=I(),u=m("button"),f=b("Validate Key"),d=I(),p=m("div"),v=b("The generated API key from your Hydrus Client"),this.h()},l:function(t){n=g(t,"FORM",{id:!0});var l=k(n);r=g(l,"LABEL",{for:!0,class:!0});var y=k(r);e=E(y,"Hydrus Client URL"),y.forEach(h),a=R(l),c=g(l,"DIV",{class:!0});var m=k(c);H&&H.l(m),s=R(m),i=g(m,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),o=R(m),u=g(m,"BUTTON",{class:!0,type:!0});var b=k(u);f=E(b,"Validate Key"),b.forEach(h),m.forEach(h),d=R(l),p=g(l,"DIV",{id:!0,class:!0});var w=k(p);v=E(w,"The generated API key from your Hydrus Client"),w.forEach(h),l.forEach(h),this.h()},h:function(){w(r,"for","key-input"),w(r,"class","form-label"),w(i,"id","key-input"),w(i,"class","form-control"),w(i,"type","password"),w(i,"aria-describedby","key-help"),w(u,"class","btn"),w(u,"type","submit"),T(u,"btn-secondary",!t[1]),T(u,"btn-primary",!!t[1]),w(c,"class","input-group"),w(p,"id","key-help"),w(p,"class","form-text"),w(n,"id","connect-key")},m:function(h,m){l(h,n,m),x(n,r),x(r,e),x(n,a),x(n,c),H&&H.m(c,null),x(c,s),x(c,i),N(i,t[2]),x(c,o),x(c,u),x(u,f),x(n,d),x(n,p),x(p,v),y||($=[S(i,"input",t[12]),S(n,"submit",t[13])],y=!0)},p:function(t,n){t[1]?H&&(H.d(1),H=null):H?H.p(t,n):((H=G(t)).c(),H.m(c,s)),4&n&&i.value!==t[2]&&N(i,t[2]),2&n&&T(u,"btn-secondary",!t[1]),2&n&&T(u,"btn-primary",!!t[1])},d:function(t){t&&h(n),H&&H.d(),y=!1,C($)}}}function F(t){var n,r,e,a,c,s,i,o,f,d,p,v,y,$,D,O,P,V=t[3]&&W(t),_=t[4].length>0&&X(t);return{c:function(){n=m("form"),r=m("label"),e=b("Hydrus Client URL"),a=I(),c=m("div"),s=m("input"),i=I(),o=m("button"),f=b("Connect"),d=I(),p=m("div"),v=b("The IP address or domain and port of your Hydrus Client"),y=I(),V&&V.c(),$=I(),_&&_.c(),D=u(),this.h()},l:function(t){n=g(t,"FORM",{id:!0});var l=k(n);r=g(l,"LABEL",{for:!0,class:!0});var m=k(r);e=E(m,"Hydrus Client URL"),m.forEach(h),a=R(l),c=g(l,"DIV",{class:!0});var b=k(c);s=g(b,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),i=R(b),o=g(b,"BUTTON",{class:!0,type:!0,disabled:!0});var w=k(o);f=E(w,"Connect"),w.forEach(h),b.forEach(h),d=R(l),p=g(l,"DIV",{id:!0,class:!0});var x=k(p);v=E(x,"The IP address or domain and port of your Hydrus Client"),x.forEach(h),l.forEach(h),y=R(t),V&&V.l(t),$=R(t),_&&_.l(t),D=u(),this.h()},h:function(){w(r,"for","url-input"),w(r,"class","form-label"),w(s,"id","url-input"),w(s,"class","form-control"),w(s,"type","url"),w(s,"aria-describedby","url-help"),w(o,"class","btn btn-primary"),w(o,"type","submit"),o.disabled=t[3],T(o,"disabled",t[3]),w(c,"class","input-group"),w(p,"id","url-help"),w(p,"class","form-text"),w(n,"id","connect-address input-group")},m:function(u,h){l(u,n,h),x(n,r),x(r,e),x(n,a),x(n,c),x(c,s),N(s,t[0]),x(c,i),x(c,o),x(o,f),x(n,d),x(n,p),x(p,v),l(u,y,h),V&&V.m(u,h),l(u,$,h),_&&_.m(u,h),l(u,D,h),O||(P=[S(s,"input",t[10]),S(o,"click",t[7]),S(n,"submit",H(t[7]))],O=!0)},p:function(t,n){1&n&&N(s,t[0]),8&n&&(o.disabled=t[3]),8&n&&T(o,"disabled",t[3]),t[3]?V?V.p(t,n):((V=W(t)).c(),V.m($.parentNode,$)):V&&(V.d(1),V=null),t[4].length>0?_?_.p(t,n):((_=X(t)).c(),_.m(D.parentNode,D)):_&&(_.d(1),_=null)},d:function(t){t&&h(n),t&&h(y),V&&V.d(t),t&&h($),_&&_.d(t),t&&h(D),O=!1,C(P)}}}function G(t){var n,r,e,a,c;return{c:function(){n=m("div"),r=m("button"),e=b("Request Temporary Key"),this.h()},l:function(t){n=g(t,"DIV",{class:!0});var a=k(n);r=g(a,"BUTTON",{class:!0});var c=k(r);e=E(c,"Request Temporary Key"),c.forEach(h),a.forEach(h),this.h()},h:function(){w(r,"class","btn btn-primary"),w(n,"class","request-new-key")},m:function(s,i){l(s,n,i),x(n,r),x(r,e),a||(c=S(r,"click",t[8]),a=!0)},p:d,d:function(t){t&&h(n),a=!1,c()}}}function W(t){var n,r,e,a,c=!t[5]&&z(t),s=!t[6]&&!!t[1]&&Q();return{c:function(){n=m("div"),r=m("div"),e=I(),c&&c.c(),a=I(),s&&s.c(),this.h()},l:function(t){n=g(t,"DIV",{class:!0,role:!0});var i=k(n);r=g(i,"DIV",{class:!0,role:!0,"aria-hidden":!0}),k(r).forEach(h),e=R(i),c&&c.l(i),a=R(i),s&&s.l(i),i.forEach(h),this.h()},h:function(){w(r,"class","spinner-border"),w(r,"role","status"),w(r,"aria-hidden","true"),w(n,"class","alert alert-primary d-flex align-items-left"),w(n,"role","alert")},m:function(t,i){l(t,n,i),x(n,r),x(n,e),c&&c.m(n,null),x(n,a),s&&s.m(n,null)},p:function(t,r){t[5]?c&&(c.d(1),c=null):c?c.p(t,r):((c=z(t)).c(),c.m(n,a)),!t[6]&&t[1]?s||((s=Q()).c(),s.m(n,null)):s&&(s.d(1),s=null)},d:function(t){t&&h(n),c&&c.d(),s&&s.d()}}}function z(t){var n,r,e,a,c;return{c:function(){n=m("p"),r=b("Connecting to\n          "),e=m("strong"),a=b(t[0]),c=b("\n          ...")},l:function(s){n=g(s,"P",{});var i=k(n);r=E(i,"Connecting to\n          "),e=g(i,"STRONG",{});var o=k(e);a=E(o,t[0]),o.forEach(h),c=E(i,"\n          ..."),i.forEach(h)},m:function(t,s){l(t,n,s),x(n,r),x(n,e),x(e,a),x(n,c)},p:function(t,n){1&n&&$(a,t[0])},d:function(t){t&&h(n)}}}function Q(t){var n,r;return{c:function(){n=m("p"),r=b("Validating key...")},l:function(t){n=g(t,"P",{});var e=k(n);r=E(e,"Validating key..."),e.forEach(h)},m:function(t,e){l(t,n,e),x(n,r)},d:function(t){t&&h(n)}}}function X(t){var n,r,e,a,c,s,i,o,u,f,d,p,v,y,T,N=t[5]?"while validating your key":"while connecting";return{c:function(){n=m("div"),r=m("h4"),e=b("Error "),a=b(N),c=I(),s=m("hr"),i=I(),o=m("code"),u=b(t[4]),f=I(),d=m("button"),p=m("span"),v=b("×"),this.h()},l:function(l){n=g(l,"DIV",{class:!0,role:!0});var y=k(n);r=g(y,"H4",{class:!0});var m=k(r);e=E(m,"Error "),a=E(m,N),m.forEach(h),c=R(y),s=g(y,"HR",{}),i=R(y),o=g(y,"CODE",{class:!0});var b=k(o);u=E(b,t[4]),b.forEach(h),f=R(y),d=g(y,"BUTTON",{type:!0,class:!0,"data-dismiss":!0,"aria-label":!0});var w=k(d);p=g(w,"SPAN",{"aria-hidden":!0});var x=k(p);v=E(x,"×"),x.forEach(h),w.forEach(h),y.forEach(h),this.h()},h:function(){w(r,"class","alert-heading"),w(o,"class","mb-0"),w(p,"aria-hidden","true"),w(d,"type","button"),w(d,"class","close"),w(d,"data-dismiss","alert"),w(d,"aria-label","Close"),w(n,"class","alert alert-danger alert-dismissible fade show"),w(n,"role","alert")},m:function(h,m){l(h,n,m),x(n,r),x(r,e),x(r,a),x(n,c),x(n,s),x(n,i),x(n,o),x(o,u),x(n,f),x(n,d),x(d,p),x(p,v),y||(T=S(d,"click",t[11]),y=!0)},p:function(t,n){32&n&&N!==(N=t[5]?"while validating your key":"while connecting")&&$(a,N),16&n&&$(u,t[4])},d:function(t){t&&h(n),y=!1,T()}}}function Y(t){var n;function r(t,n){return t[5]?t[6]?void 0:j:F}var e=r(t),a=e&&e(t);return{c:function(){a&&a.c(),n=u()},l:function(t){a&&a.l(t),n=u()},m:function(t,r){a&&a.m(t,r),l(t,n,r)},p:function(t,c){var s=f(c,1)[0];e===(e=r(t))&&a?a.p(t,s):(a&&a.d(1),(a=e&&e(t))&&(a.c(),a.m(n.parentNode,n)))},i:d,o:d,d:function(t){a&&a.d(t),t&&h(n)}}}function Z(t,n,r){var e="http://127.0.0.1:45869",a="",c="",s=!1,i="",o=!1,u=!1;function l(){return f.apply(this,arguments)}function f(){return(f=v(y.mark((function t(){var n,c,u;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return r(4,i=""),r(3,s=!0),n=A(e),t.prev=5,t.next=8,n.api_version();case 8:if(c=t.sent,u=c.version,console.log("Connected with API version: ".concat(u)),localStorage.setItem("address",JSON.stringify(e)),r(5,o=!0),!a){t.next=16;break}return t.next=16,m();case 16:t.next=24;break;case 18:t.prev=18,t.t0=t.catch(5),console.error(t.t0),q.set(t.t0),K.set(!1),r(4,i=String(t.t0));case 24:r(3,s=!1);case 25:case"end":return t.stop()}}),t,null,[[5,18]])})))).apply(this,arguments)}function d(){return h.apply(this,arguments)}function h(){return(h=v(y.mark((function t(){var n,e,s;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=A(),r(4,i=""),t.prev=2,t.next=5,n.request_new_permissions("miia-web",B);case 5:e=t.sent,s=e.access_key,localStorage.setItem("access_key",JSON.stringify(a)),r(1,a=s),r(2,c=a),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0),r(4,i=String(t.t0));case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function m(){return b.apply(this,arguments)}function b(){return(b=v(y.mark((function t(){var n,e,c;return y.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(3,s=!0),(n=A()).access_key=a,r(4,i=""),t.prev=4,t.next=7,n.verify_access_key(a);case 7:e=t.sent,c=e.human_description,localStorage.setItem("access_key",JSON.stringify(a)),console.log(c),r(6,u=!0),K.set(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),console.error(t.t0),r(4,i=String(t.t0));case 19:r(3,s=!1);case 20:case"end":return t.stop()}}),t,null,[[4,15]])})))).apply(this,arguments)}p((function(){var t=localStorage.getItem("address");t&&r(0,e=JSON.parse(t));var n=localStorage.getItem("access_key");n&&r(1,a=JSON.parse(n)),v(y.mark((function n(){return y.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=10;break}return n.prev=1,n.next=4,l();case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),console.error(n.t0),r(4,i=String(n.t0));case 10:case"end":return n.stop()}}),n,null,[[1,6]])})))()}));return[e,a,c,s,i,o,u,l,d,m,function(){e=this.value,r(0,e)},function(){r(4,i="")},function(){c=this.value,r(2,c)},function(){c?(r(1,a=c),m()):d()}]}var tt=function(t){n(e,o);var r=M(e);function e(t){var n;return a(this,e),n=r.call(this),c(i(n),t,Z,Y,s,{}),n}return e}();function nt(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,c=r(t);if(n){var s=r(this).constructor;a=Reflect.construct(c,arguments,s)}else a=c.apply(this,arguments);return e(this,a)}}function rt(t){var n,r,e,a,c,s,i,o,u,f,p,v,y,w;return o=new tt({}),y=new J({}),{c:function(){n=I(),r=m("h1"),e=b("Miia Web!"),a=I(),c=m("p"),s=b("a web client for Hydrus"),i=I(),D(o.$$.fragment),u=I(),f=m("h2"),p=b("Search"),v=I(),D(y.$$.fragment),this.h()},l:function(t){O('[data-svelte="svelte-1nj90w7"]',document.head).forEach(h),n=R(t),r=g(t,"H1",{});var l=k(r);e=E(l,"Miia Web!"),l.forEach(h),a=R(t),c=g(t,"P",{});var d=k(c);s=E(d,"a web client for Hydrus"),d.forEach(h),i=R(t),P(o.$$.fragment,t),u=R(t),f=g(t,"H2",{});var m=k(f);p=E(m,"Search"),m.forEach(h),v=R(t),P(y.$$.fragment,t),this.h()},h:function(){document.title="Miia Web"},m:function(t,d){l(t,n,d),l(t,r,d),x(r,e),l(t,a,d),l(t,c,d),x(c,s),l(t,i,d),V(o,t,d),l(t,u,d),l(t,f,d),x(f,p),l(t,v,d),V(y,t,d),w=!0},p:d,i:function(t){w||(_(o.$$.fragment,t),_(y.$$.fragment,t),w=!0)},o:function(t){U(o.$$.fragment,t),U(y.$$.fragment,t),w=!1},d:function(t){t&&h(n),t&&h(r),t&&h(a),t&&h(c),t&&h(i),L(o,t),t&&h(u),t&&h(f),t&&h(v),L(y,t)}}}function et(t){return[]}var at=function(t){n(e,o);var r=nt(e);function e(t){var n;return a(this,e),n=r.call(this),c(i(n),t,et,rt,s,{}),n}return e}();export default at;
