import{w as a,S as t,i as e,s,e as n,a as r,n as c,d as l,o,b as i,t as d,c as h,f as u,g as f,h as p,j as g,l as y,k as m,m as b,p as v,q as E,r as S,u as T,v as I,x as N,y as k,z as w,A as $,B as O,C as V,D,E as _}from"./client.dd5b1781.js";import{G as U,r as q}from"./hydrus-connection.284b40d2.js";const x=a("No Error"),P=a(!1);function C(a){let t,e,s,n,c,o,T,I,N,k=!a[1]&&H(a);return{c(){t=i("div"),k&&k.c(),e=m(),s=i("div"),n=i("input"),c=m(),o=i("button"),T=d("Validate Manual Key"),this.h()},l(a){t=h(a,"DIV",{id:!0});var r=u(t);k&&k.l(r),e=b(r),s=h(r,"DIV",{class:!0});var i=u(s);n=h(i,"INPUT",{class:!0,type:!0}),c=b(i),o=h(i,"BUTTON",{class:!0});var d=u(o);T=f(d,"Validate Manual Key"),d.forEach(l),i.forEach(l),r.forEach(l),this.h()},h(){p(n,"class","form-control"),p(n,"type","password"),p(o,"class","btn"),v(o,"btn-secondary",!a[1]),v(o,"btn-primary",!!a[1]),p(s,"class","add-manual-key input-group"),p(t,"id","connect-key")},m(l,i){r(l,t,i),k&&k.m(t,null),g(t,e),g(t,s),g(s,n),E(n,a[2]),g(s,c),g(s,o),g(o,T),I||(N=[y(n,"input",a[10]),y(o,"click",a[11])],I=!0)},p(a,s){a[1]?k&&(k.d(1),k=null):k?k.p(a,s):(k=H(a),k.c(),k.m(t,e)),4&s&&n.value!==a[2]&&E(n,a[2]),2&s&&v(o,"btn-secondary",!a[1]),2&s&&v(o,"btn-primary",!!a[1])},d(a){a&&l(t),k&&k.d(),I=!1,S(N)}}}function R(a){let t,e,s,n,c,o,T,I,N,k,w,$=a[3]&&J(a);return{c(){t=i("div"),e=i("p"),s=d("Hydrus Client URL"),n=m(),c=i("input"),o=m(),T=i("button"),I=d("Connect"),N=m(),$&&$.c(),this.h()},l(a){t=h(a,"DIV",{id:!0});var r=u(t);e=h(r,"P",{});var i=u(e);s=f(i,"Hydrus Client URL"),i.forEach(l),n=b(r),c=h(r,"INPUT",{}),o=b(r),T=h(r,"BUTTON",{class:!0});var d=u(T);I=f(d,"Connect"),d.forEach(l),N=b(r),$&&$.l(r),r.forEach(l),this.h()},h(){p(T,"class","btn btn-primary"),v(T,"disabled",a[3]),p(t,"id","connect-address")},m(l,i){r(l,t,i),g(t,e),g(e,s),g(t,n),g(t,c),E(c,a[0]),g(t,o),g(t,T),g(T,I),g(t,N),$&&$.m(t,null),k||(w=[y(c,"input",a[9]),y(T,"click",a[6])],k=!0)},p(a,e){1&e&&c.value!==a[0]&&E(c,a[0]),8&e&&v(T,"disabled",a[3]),a[3]?$?$.p(a,e):($=J(a),$.c(),$.m(t,null)):$&&($.d(1),$=null)},d(a){a&&l(t),$&&$.d(),k=!1,S(w)}}}function H(a){let t,e,s,n,o;return{c(){t=i("div"),e=i("button"),s=d("Request Temporary Key"),this.h()},l(a){t=h(a,"DIV",{class:!0});var n=u(t);e=h(n,"BUTTON",{class:!0});var r=u(e);s=f(r,"Request Temporary Key"),r.forEach(l),n.forEach(l),this.h()},h(){p(e,"class","btn btn-primary"),p(t,"class","request-new-key")},m(c,l){r(c,t,l),g(t,e),g(e,s),n||(o=y(e,"click",a[7]),n=!0)},p:c,d(a){a&&l(t),n=!1,o()}}}function J(a){let t,e,s,n,c=!a[4]&&A(a),o=!a[5]&&!!a[1]&&B();return{c(){t=i("div"),e=i("div"),s=m(),c&&c.c(),n=m(),o&&o.c(),this.h()},l(a){t=h(a,"DIV",{class:!0,role:!0});var r=u(t);e=h(r,"DIV",{class:!0,role:!0,"aria-hidden":!0}),u(e).forEach(l),s=b(r),c&&c.l(r),n=b(r),o&&o.l(r),r.forEach(l),this.h()},h(){p(e,"class","spinner-border"),p(e,"role","status"),p(e,"aria-hidden","true"),p(t,"class","alert alert-primary d-flex align-items-left"),p(t,"role","alert")},m(a,l){r(a,t,l),g(t,e),g(t,s),c&&c.m(t,null),g(t,n),o&&o.m(t,null)},p(a,e){a[4]?c&&(c.d(1),c=null):c?c.p(a,e):(c=A(a),c.c(),c.m(t,n)),!a[5]&&a[1]?o||(o=B(),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(a){a&&l(t),c&&c.d(),o&&o.d()}}}function A(a){let t,e,s,n,c;return{c(){t=i("p"),e=d("Connecting to\n            "),s=i("strong"),n=d(a[0]),c=d("\n            ...")},l(r){t=h(r,"P",{});var o=u(t);e=f(o,"Connecting to\n            "),s=h(o,"STRONG",{});var i=u(s);n=f(i,a[0]),i.forEach(l),c=f(o,"\n            ..."),o.forEach(l)},m(a,l){r(a,t,l),g(t,e),g(t,s),g(s,n),g(t,c)},p(a,t){1&t&&T(n,a[0])},d(a){a&&l(t)}}}function B(a){let t,e;return{c(){t=i("p"),e=d("Validating key...")},l(a){t=h(a,"P",{});var s=u(t);e=f(s,"Validating key..."),s.forEach(l)},m(a,s){r(a,t,s),g(t,e)},d(a){a&&l(t)}}}function M(a){let t;function e(a,t){return a[4]?a[5]?void 0:C:R}let s=e(a),o=s&&s(a);return{c(){o&&o.c(),t=n()},l(a){o&&o.l(a),t=n()},m(a,e){o&&o.m(a,e),r(a,t,e)},p(a,[n]){s===(s=e(a))&&o?o.p(a,n):(o&&o.d(1),o=s&&s(a),o&&(o.c(),o.m(t.parentNode,t)))},i:c,o:c,d(a){o&&o.d(a),a&&l(t)}}}function j(a,t,e){let s="http://127.0.0.1:45869",n="",r="",c=!1,l=!1,i=!1;async function d(){if(c)return;e(3,c=!0);const a=U(s);try{const{version:t}=await a.api_version();console.log("Connected with API version: "+t),localStorage.setItem("address",JSON.stringify(s)),e(4,l=!0),n&&await h()}catch(a){console.error(a),x.set(a),P.set(!1)}e(3,c=!1)}async function h(){e(3,c=!0);const a=U();a.access_key=n;try{const{human_description:t}=await a.verify_access_key(n);localStorage.setItem("access_key",JSON.stringify(n)),console.log(t),e(5,i=!0),P.set(!0)}catch(a){console.error(a)}e(3,c=!1)}o(()=>{const a=localStorage.getItem("address");a&&e(0,s=JSON.parse(a));const t=localStorage.getItem("access_key");t&&e(1,n=JSON.parse(t)),(async()=>{if(a)try{await d()}catch(a){console.error(a)}})()});return[s,n,r,c,l,i,d,async function(){const a=U();try{const{access_key:t}=await a.request_new_permissions("miia-web",q);localStorage.setItem("access_key",JSON.stringify(n)),e(1,n=t),e(2,r=n)}catch(a){console.error(a)}},h,function(){s=this.value,e(0,s)},function(){r=this.value,e(2,r)},()=>{e(1,n=r),h()}]}class K extends t{constructor(a){super(),e(this,a,j,M,s,{})}}function W(a,t,e){const s=a.slice();return s[7]=t[e],s}function G(a){let t,e,s,n,c,o,v,E,S=a[7]+"";function N(...t){return a[4](a[7],...t)}return{c(){t=i("button"),e=d(S),s=m(),n=i("span"),c=d("×"),this.h()},l(a){t=h(a,"BUTTON",{type:!0,class:!0,title:!0});var r=u(t);e=f(r,S),s=b(r),n=h(r,"SPAN",{class:!0,"aria-hidden":!0});var o=u(n);c=f(o,"×"),o.forEach(l),r.forEach(l),this.h()},h(){p(n,"class","badge"),p(n,"aria-hidden","true"),p(t,"type","button"),p(t,"class","btn btn-secondary btn-sm"),p(t,"title",o="Remove tag '"+a[7]+"'")},m(a,l){r(a,t,l),g(t,e),g(t,s),g(t,n),g(n,c),v||(E=y(t,"click",I(N)),v=!0)},p(s,n){a=s,1&n&&S!==(S=a[7]+"")&&T(e,S),1&n&&o!==(o="Remove tag '"+a[7]+"'")&&p(t,"title",o)},d(a){a&&l(t),v=!1,E()}}}function L(a){let t,e,s,n,o,T,k,w,$,O,V,D,_,U,q,x,P,C,R,H,J,A,B,M,j,K,L=a[0],z=[];for(let t=0;t<L.length;t+=1)z[t]=G(W(a,L,t));return{c(){t=i("div"),e=i("h2"),s=d("Search"),n=m(),o=i("form"),T=i("div");for(let a=0;a<z.length;a+=1)z[a].c();k=m(),w=i("input"),$=m(),O=i("button"),V=d("Add Tag"),_=m(),U=i("a"),q=d("Search"),C=m(),R=i("div"),H=i("div"),J=i("h3"),A=d("Search Tags"),B=m(),M=i("div"),this.h()},l(a){t=h(a,"DIV",{id:!0});var r=u(t);e=h(r,"H2",{});var c=u(e);s=f(c,"Search"),c.forEach(l),n=b(r),o=h(r,"FORM",{});var i=u(o);T=h(i,"DIV",{class:!0});var d=u(T);for(let a=0;a<z.length;a+=1)z[a].l(d);k=b(d),w=h(d,"INPUT",{type:!0,class:!0,placeholder:!0,"aria-label":!0,"aria-describedby":!0}),$=b(d),O=h(d,"BUTTON",{class:!0,disabled:!0,type:!0,id:!0});var p=u(O);V=f(p,"Add Tag"),p.forEach(l),_=b(d),U=h(d,"A",{class:!0,type:!0,id:!0,disabled:!0,href:!0});var g=u(U);q=f(g,"Search"),g.forEach(l),d.forEach(l),C=b(i),R=h(i,"DIV",{id:!0,class:!0});var y=u(R);H=h(y,"DIV",{id:!0,class:!0});var m=u(H);J=h(m,"H3",{class:!0});var v=u(J);A=f(v,"Search Tags"),v.forEach(l),m.forEach(l),B=b(y),M=h(y,"DIV",{id:!0,class:!0}),u(M).forEach(l),y.forEach(l),i.forEach(l),r.forEach(l),this.h()},h(){p(w,"type","text"),p(w,"class","form-control"),p(w,"placeholder","tag:to-add"),p(w,"aria-label","Tag to add to search query"),p(w,"aria-describedby","add-tag"),p(O,"class","btn"),O.disabled=D=0===a[1].length,p(O,"type","button"),p(O,"id","add-tag"),v(O,"btn-primary",a[1].length>0),v(O,"btn-outline-secondary",0===a[1].length),p(U,"class","btn btn-success"),p(U,"type","search"),p(U,"id","search"),p(U,"disabled",x=0===a[0].length),p(U,"href",P="/tags?q="+JSON.stringify(a[0])),p(T,"class","input-group"),p(J,"class","sr-only sr-only-focusable"),p(H,"id","tags"),p(H,"class","col"),p(M,"id","action"),p(M,"class","col-auto text-center"),p(R,"id","query"),p(R,"class","row"),p(t,"id","search")},m(c,l){r(c,t,l),g(t,e),g(e,s),g(t,n),g(t,o),g(o,T);for(let a=0;a<z.length;a+=1)z[a].m(T,null);g(T,k),g(T,w),E(w,a[1]),g(T,$),g(T,O),g(O,V),g(T,_),g(T,U),g(U,q),g(o,C),g(o,R),g(R,H),g(H,J),g(J,A),g(R,B),g(R,M),j||(K=[y(w,"input",a[5]),y(O,"click",I(a[2]))],j=!0)},p(a,[t]){if(9&t){let e;for(L=a[0],e=0;e<L.length;e+=1){const s=W(a,L,e);z[e]?z[e].p(s,t):(z[e]=G(s),z[e].c(),z[e].m(T,k))}for(;e<z.length;e+=1)z[e].d(1);z.length=L.length}2&t&&w.value!==a[1]&&E(w,a[1]),2&t&&D!==(D=0===a[1].length)&&(O.disabled=D),2&t&&v(O,"btn-primary",a[1].length>0),2&t&&v(O,"btn-outline-secondary",0===a[1].length),1&t&&x!==(x=0===a[0].length)&&p(U,"disabled",x),1&t&&P!==(P="/tags?q="+JSON.stringify(a[0]))&&p(U,"href",P)},i:c,o:c,d(a){a&&l(t),N(z,a),j=!1,S(K)}}}function z(a,t,e){let{tags:s=["landscape"]}=t,n="";function r(a){const t=s.indexOf(String(a));console.log(a,t),s.splice(t,1),e(0,s)}return a.$set=a=>{"tags"in a&&e(0,s=a.tags)},[s,n,function(){console.log(n),s.includes(n)||(s.push(n),e(0,s)),e(1,n="")},r,a=>{r(a)},function(){n=this.value,e(1,n)}]}class F extends t{constructor(a){super(),e(this,a,z,L,s,{tags:0})}}function Q(a){let t,e,s,n,o,p,y,v,E,S,T;return v=new K({}),S=new F({}),{c(){t=m(),e=i("h1"),s=d("Miia Web!"),n=m(),o=i("p"),p=d("a web client for Hydrus"),y=m(),k(v.$$.fragment),E=m(),k(S.$$.fragment),this.h()},l(a){w('[data-svelte="svelte-1nj90w7"]',document.head).forEach(l),t=b(a),e=h(a,"H1",{});var r=u(e);s=f(r,"Miia Web!"),r.forEach(l),n=b(a),o=h(a,"P",{});var c=u(o);p=f(c,"a web client for Hydrus"),c.forEach(l),y=b(a),$(v.$$.fragment,a),E=b(a),$(S.$$.fragment,a),this.h()},h(){document.title="Miia Web"},m(a,c){r(a,t,c),r(a,e,c),g(e,s),r(a,n,c),r(a,o,c),g(o,p),r(a,y,c),O(v,a,c),r(a,E,c),O(S,a,c),T=!0},p:c,i(a){T||(V(v.$$.fragment,a),V(S.$$.fragment,a),T=!0)},o(a){D(v.$$.fragment,a),D(S.$$.fragment,a),T=!1},d(a){a&&l(t),a&&l(e),a&&l(n),a&&l(o),a&&l(y),_(v,a),a&&l(E),_(S,a)}}}function X(a){return[]}export default class extends t{constructor(a){super(),e(this,a,X,Q,s,{})}}
