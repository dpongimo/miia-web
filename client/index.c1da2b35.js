import{w as a,S as e,i as r,s,e as t,a as n,n as c,d as i,o as l,b as o,t as d,c as u,f as h,g as f,h as y,j as m,l as p,k as b,m as g,p as v,q as E,r as k,u as w,v as I,x as S,y as T,z as N,A as C,B as $,C as H,D as O}from"./client.f82d9d9c.js";import{G as V,r as P,T as _}from"./TagSearch.e699a1fe.js";const D=a("No Error"),R=a(!1);function U(a){let e,r,s,t,c,l,w,I,S,T,N,C,$,H,O,V=!a[1]&&x(a);return{c(){e=o("form"),r=o("label"),s=d("Hydrus Client URL"),t=b(),c=o("div"),V&&V.c(),l=b(),w=o("input"),I=b(),S=o("button"),T=d("Validate Key"),N=b(),C=o("div"),$=d("The generated API key from your Hydrus Client"),this.h()},l(a){e=u(a,"FORM",{id:!0});var n=h(e);r=u(n,"LABEL",{for:!0,class:!0});var o=h(r);s=f(o,"Hydrus Client URL"),o.forEach(i),t=g(n),c=u(n,"DIV",{class:!0});var d=h(c);V&&V.l(d),l=g(d),w=u(d,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),I=g(d),S=u(d,"BUTTON",{class:!0,type:!0});var y=h(S);T=f(y,"Validate Key"),y.forEach(i),d.forEach(i),N=g(n),C=u(n,"DIV",{id:!0,class:!0});var m=h(C);$=f(m,"The generated API key from your Hydrus Client"),m.forEach(i),n.forEach(i),this.h()},h(){y(r,"for","key-input"),y(r,"class","form-label"),y(w,"id","key-input"),y(w,"class","form-control"),y(w,"type","password"),y(w,"aria-describedby","key-help"),y(S,"class","btn"),y(S,"type","submit"),v(S,"btn-secondary",!a[1]),v(S,"btn-primary",!!a[1]),y(c,"class","input-group"),y(C,"id","key-help"),y(C,"class","form-text"),y(e,"id","connect-key")},m(i,o){n(i,e,o),m(e,r),m(r,s),m(e,t),m(e,c),V&&V.m(c,null),m(c,l),m(c,w),E(w,a[2]),m(c,I),m(c,S),m(S,T),m(e,N),m(e,C),m(C,$),H||(O=[p(w,"input",a[12]),p(e,"submit",a[13])],H=!0)},p(a,e){a[1]?V&&(V.d(1),V=null):V?V.p(a,e):(V=x(a),V.c(),V.m(c,l)),4&e&&w.value!==a[2]&&E(w,a[2]),2&e&&v(S,"btn-secondary",!a[1]),2&e&&v(S,"btn-primary",!!a[1])},d(a){a&&i(e),V&&V.d(),H=!1,k(O)}}}function L(a){let e,r,s,c,l,w,S,T,N,C,$,H,O,V,P,_,D,R=a[3]&&A(a),U=a[4].length>0&&J(a);return{c(){e=o("form"),r=o("label"),s=d("Hydrus Client URL"),c=b(),l=o("div"),w=o("input"),S=b(),T=o("button"),N=d("Connect"),C=b(),$=o("div"),H=d("The IP address or domain and port of your Hydrus Client"),O=b(),R&&R.c(),V=b(),U&&U.c(),P=t(),this.h()},l(a){e=u(a,"FORM",{id:!0});var n=h(e);r=u(n,"LABEL",{for:!0,class:!0});var o=h(r);s=f(o,"Hydrus Client URL"),o.forEach(i),c=g(n),l=u(n,"DIV",{class:!0});var d=h(l);w=u(d,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),S=g(d),T=u(d,"BUTTON",{class:!0,type:!0,disabled:!0});var y=h(T);N=f(y,"Connect"),y.forEach(i),d.forEach(i),C=g(n),$=u(n,"DIV",{id:!0,class:!0});var m=h($);H=f(m,"The IP address or domain and port of your Hydrus Client"),m.forEach(i),n.forEach(i),O=g(a),R&&R.l(a),V=g(a),U&&U.l(a),P=t(),this.h()},h(){y(r,"for","url-input"),y(r,"class","form-label"),y(w,"id","url-input"),y(w,"class","form-control"),y(w,"type","url"),y(w,"aria-describedby","url-help"),y(T,"class","btn btn-primary"),y(T,"type","submit"),T.disabled=a[3],v(T,"disabled",a[3]),y(l,"class","input-group"),y($,"id","url-help"),y($,"class","form-text"),y(e,"id","connect-address input-group")},m(t,i){n(t,e,i),m(e,r),m(r,s),m(e,c),m(e,l),m(l,w),E(w,a[0]),m(l,S),m(l,T),m(T,N),m(e,C),m(e,$),m($,H),n(t,O,i),R&&R.m(t,i),n(t,V,i),U&&U.m(t,i),n(t,P,i),_||(D=[p(w,"input",a[10]),p(T,"click",a[7]),p(e,"submit",I(a[7]))],_=!0)},p(a,e){1&e&&E(w,a[0]),8&e&&(T.disabled=a[3]),8&e&&v(T,"disabled",a[3]),a[3]?R?R.p(a,e):(R=A(a),R.c(),R.m(V.parentNode,V)):R&&(R.d(1),R=null),a[4].length>0?U?U.p(a,e):(U=J(a),U.c(),U.m(P.parentNode,P)):U&&(U.d(1),U=null)},d(a){a&&i(e),a&&i(O),R&&R.d(a),a&&i(V),U&&U.d(a),a&&i(P),_=!1,k(D)}}}function x(a){let e,r,s,t,l;return{c(){e=o("div"),r=o("button"),s=d("Request Temporary Key"),this.h()},l(a){e=u(a,"DIV",{class:!0});var t=h(e);r=u(t,"BUTTON",{class:!0});var n=h(r);s=f(n,"Request Temporary Key"),n.forEach(i),t.forEach(i),this.h()},h(){y(r,"class","btn btn-primary"),y(e,"class","request-new-key")},m(c,i){n(c,e,i),m(e,r),m(r,s),t||(l=p(r,"click",a[8]),t=!0)},p:c,d(a){a&&i(e),t=!1,l()}}}function A(a){let e,r,s,t,c=!a[5]&&B(a),l=!a[6]&&!!a[1]&&q();return{c(){e=o("div"),r=o("div"),s=b(),c&&c.c(),t=b(),l&&l.c(),this.h()},l(a){e=u(a,"DIV",{class:!0,role:!0});var n=h(e);r=u(n,"DIV",{class:!0,role:!0,"aria-hidden":!0}),h(r).forEach(i),s=g(n),c&&c.l(n),t=g(n),l&&l.l(n),n.forEach(i),this.h()},h(){y(r,"class","spinner-border"),y(r,"role","status"),y(r,"aria-hidden","true"),y(e,"class","alert alert-primary d-flex align-items-left"),y(e,"role","alert")},m(a,i){n(a,e,i),m(e,r),m(e,s),c&&c.m(e,null),m(e,t),l&&l.m(e,null)},p(a,r){a[5]?c&&(c.d(1),c=null):c?c.p(a,r):(c=B(a),c.c(),c.m(e,t)),!a[6]&&a[1]?l||(l=q(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&i(e),c&&c.d(),l&&l.d()}}}function B(a){let e,r,s,t,c;return{c(){e=o("p"),r=d("Connecting to\n          "),s=o("strong"),t=d(a[0]),c=d("\n          ...")},l(n){e=u(n,"P",{});var l=h(e);r=f(l,"Connecting to\n          "),s=u(l,"STRONG",{});var o=h(s);t=f(o,a[0]),o.forEach(i),c=f(l,"\n          ..."),l.forEach(i)},m(a,i){n(a,e,i),m(e,r),m(e,s),m(s,t),m(e,c)},p(a,e){1&e&&w(t,a[0])},d(a){a&&i(e)}}}function q(a){let e,r;return{c(){e=o("p"),r=d("Validating key...")},l(a){e=u(a,"P",{});var s=h(e);r=f(s,"Validating key..."),s.forEach(i)},m(a,s){n(a,e,s),m(e,r)},d(a){a&&i(e)}}}function J(a){let e,r,s,t,c,l,v,E,k,I,S,T,N,C,$,H=a[5]?"while validating your key":"while connecting";return{c(){e=o("div"),r=o("h4"),s=d("Error "),t=d(H),c=b(),l=o("hr"),v=b(),E=o("code"),k=d(a[4]),I=b(),S=o("button"),T=o("span"),N=d("×"),this.h()},l(n){e=u(n,"DIV",{class:!0,role:!0});var o=h(e);r=u(o,"H4",{class:!0});var d=h(r);s=f(d,"Error "),t=f(d,H),d.forEach(i),c=g(o),l=u(o,"HR",{}),v=g(o),E=u(o,"CODE",{class:!0});var y=h(E);k=f(y,a[4]),y.forEach(i),I=g(o),S=u(o,"BUTTON",{type:!0,class:!0,"data-dismiss":!0,"aria-label":!0});var m=h(S);T=u(m,"SPAN",{"aria-hidden":!0});var p=h(T);N=f(p,"×"),p.forEach(i),m.forEach(i),o.forEach(i),this.h()},h(){y(r,"class","alert-heading"),y(E,"class","mb-0"),y(T,"aria-hidden","true"),y(S,"type","button"),y(S,"class","close"),y(S,"data-dismiss","alert"),y(S,"aria-label","Close"),y(e,"class","alert alert-danger alert-dismissible fade show"),y(e,"role","alert")},m(i,o){n(i,e,o),m(e,r),m(r,s),m(r,t),m(e,c),m(e,l),m(e,v),m(e,E),m(E,k),m(e,I),m(e,S),m(S,T),m(T,N),C||($=p(S,"click",a[11]),C=!0)},p(a,e){32&e&&H!==(H=a[5]?"while validating your key":"while connecting")&&w(t,H),16&e&&w(k,a[4])},d(a){a&&i(e),C=!1,$()}}}function M(a){let e;function r(a,e){return a[5]?a[6]?void 0:U:L}let s=r(a),l=s&&s(a);return{c(){l&&l.c(),e=t()},l(a){l&&l.l(a),e=t()},m(a,r){l&&l.m(a,r),n(a,e,r)},p(a,[t]){s===(s=r(a))&&l?l.p(a,t):(l&&l.d(1),l=s&&s(a),l&&(l.c(),l.m(e.parentNode,e)))},i:c,o:c,d(a){l&&l.d(a),a&&i(e)}}}function j(a,e,r){let s="http://127.0.0.1:45869",t="",n="",c=!1,i="",o=!1,d=!1;async function u(){if(c)return;r(4,i=""),r(3,c=!0);const a=V(s);try{const{version:e}=await a.api_version();console.log("Connected with API version: "+e),localStorage.setItem("address",JSON.stringify(s)),r(5,o=!0),t&&await f()}catch(a){console.error(a),D.set(a),R.set(!1),r(4,i=String(a))}r(3,c=!1)}async function h(){const a=V();r(4,i="");try{const{access_key:e}=await a.request_new_permissions("miia-web",P);localStorage.setItem("access_key",JSON.stringify(t)),r(1,t=e),r(2,n=t)}catch(a){console.error(a),r(4,i=String(a))}}async function f(){r(3,c=!0);const a=V();a.access_key=t,r(4,i="");try{const{human_description:e}=await a.verify_access_key(t);localStorage.setItem("access_key",JSON.stringify(t)),console.log(e),r(6,d=!0),R.set(!0)}catch(a){console.error(a),r(4,i=String(a))}r(3,c=!1)}l(()=>{const a=localStorage.getItem("address");a&&r(0,s=JSON.parse(a));const e=localStorage.getItem("access_key");e&&r(1,t=JSON.parse(e)),(async()=>{if(a)try{await u()}catch(a){console.error(a),r(4,i=String(a))}})()});return[s,t,n,c,i,o,d,u,h,f,function(){s=this.value,r(0,s)},()=>{r(4,i="")},function(){n=this.value,r(2,n)},()=>{n?(r(1,t=n),f()):h()}]}class K extends e{constructor(a){super(),r(this,a,j,M,s,{})}}function W(a){let e,r,s,t,l,y,p,v,E,k,w,I,V,P;return v=new K({}),V=new _({}),{c(){e=b(),r=o("h1"),s=d("Miia Web!"),t=b(),l=o("p"),y=d("a web client for Hydrus"),p=b(),S(v.$$.fragment),E=b(),k=o("h2"),w=d("Search"),I=b(),S(V.$$.fragment),this.h()},l(a){T('[data-svelte="svelte-1nj90w7"]',document.head).forEach(i),e=g(a),r=u(a,"H1",{});var n=h(r);s=f(n,"Miia Web!"),n.forEach(i),t=g(a),l=u(a,"P",{});var c=h(l);y=f(c,"a web client for Hydrus"),c.forEach(i),p=g(a),N(v.$$.fragment,a),E=g(a),k=u(a,"H2",{});var o=h(k);w=f(o,"Search"),o.forEach(i),I=g(a),N(V.$$.fragment,a),this.h()},h(){document.title="Miia Web"},m(a,c){n(a,e,c),n(a,r,c),m(r,s),n(a,t,c),n(a,l,c),m(l,y),n(a,p,c),C(v,a,c),n(a,E,c),n(a,k,c),m(k,w),n(a,I,c),C(V,a,c),P=!0},p:c,i(a){P||($(v.$$.fragment,a),$(V.$$.fragment,a),P=!0)},o(a){H(v.$$.fragment,a),H(V.$$.fragment,a),P=!1},d(a){a&&i(e),a&&i(r),a&&i(t),a&&i(l),a&&i(p),O(v,a),a&&i(E),a&&i(k),a&&i(I),O(V,a)}}}function F(a){return[]}export default class extends e{constructor(a){super(),r(this,a,F,W,s,{})}}
