import{S as e,i as t,s as n,O as l,e as s,c as a,a as r,d as i,f as c,p as o,g as h,n as d,P as u,v as f,H as g,t as m,b as v,K as p,h as $,o as b,l as _,u as w,j as x,m as E,k as y,F as k,C as I,G as D,B as V,x as R,z as U,A as L,D as O,I as P,r as S,E as T,Q as M,R as z,T as N,U as j,M as Q}from"./client.5382c41e.js";import{G as A,I as B,P as G,T as H}from"./TagSearch.798e19d6.js";function C(e,t=this){return new Promise((function(n){setTimeout(n.bind(null,t),e)}))}function F(e){let t,n,l,o=e[13].message+"";return{c(){t=s("div"),n=s("pre"),l=m(o),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);n=a(s,"PRE",{style:!0});var c=r(n);l=v(c,o),c.forEach(i),s.forEach(i),this.h()},h(){p(n,"color","red"),c(t,"class","card-body")},m(e,s){h(e,t,s),$(t,n),$(n,l)},p(e,t){1&t&&o!==(o=e[13].message+"")&&b(l,o)},d(e){e&&i(t)}}}function q(e){let t,n,l,r;return{c(){t=s("img"),this.h()},l(e){t=a(e,"IMG",{src:!0,alt:!0,id:!0,class:!0}),this.h()},h(){t.src!==(n=URL.createObjectURL(e[12]))&&c(t,"src",n),c(t,"alt",e[0]),c(t,"id",e[0]),c(t,"class","svelte-1x1zhyt")},m(n,s){h(n,t,s),e[8](t),l||(r=[_(t,"load",e[4]),_(t,"click",e[5])],l=!0)},p(e,l){1&l&&t.src!==(n=URL.createObjectURL(e[12]))&&c(t,"src",n),1&l&&c(t,"alt",e[0]),1&l&&c(t,"id",e[0])},d(n){n&&i(t),e[8](null),l=!1,w(r)}}}function J(e){let t,n,l,o,d,u;return{c(){t=s("div"),n=s("div"),l=x(),o=s("p"),d=m("Querying "),u=m(e[0]),this.h()},l(s){t=a(s,"DIV",{class:!0});var c=r(t);n=a(c,"DIV",{class:!0,role:!0,"aria-hidden":!0}),r(n).forEach(i),l=E(c),o=a(c,"P",{});var h=r(o);d=v(h,"Querying "),u=v(h,e[0]),h.forEach(i),c.forEach(i),this.h()},h(){c(n,"class","spinner-border"),c(n,"role","status"),c(n,"aria-hidden","true"),c(t,"class","card-body loading svelte-1x1zhyt")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(t,o),$(o,d),$(o,u)},p(e,t){1&t&&b(u,e[0])},d(e){e&&i(t)}}}function K(e){let t,n,u={ctx:e,current:null,token:null,pending:J,then:q,catch:F,value:12,error:13};return l(n=e[3](e[0]),u),{c(){t=s("div"),u.block.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var n=r(t);u.block.l(n),n.forEach(i),this.h()},h(){c(t,"class","card svelte-1x1zhyt"),o(t,"active",e[1])},m(e,n){h(e,t,n),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=null},p(s,[a]){if(e=s,u.ctx=e,1&a&&n!==(n=e[3](e[0]))&&l(n,u));else{const t=e.slice();t[12]=u.resolved,u.block.p(t,a)}2&a&&o(t,"active",e[1])},i:d,o:d,d(e){e&&i(t),u.block.d(),u.token=null,u=null}}}function W(e,t,n){let l,{file_id:s}=t,{max_width:a=200}=t,{max_height:r=200}=t,{active:i=!1}=t;const c=u();return f(async()=>{}),e.$set=e=>{"file_id"in e&&n(0,s=e.file_id),"max_width"in e&&n(6,a=e.max_width),"max_height"in e&&n(7,r=e.max_height),"active"in e&&n(1,i=e.active)},[s,i,l,async function(e){const t=A();return await t.get_thumbnail({file_id:e})},function(){const e=function(e,t,n,l){const s=Math.min(n/e,l/t);return{width:e*s,height:t*s}}(l.naturalWidth,l.naturalHeight,a,r);n(2,l.width=e.width,l),n(2,l.height=e.height,l)},function(e){c("click",{source_event:e,file_id:s,dom_image:l})},a,r,function(e){g[e?"unshift":"push"](()=>{l=e,n(2,l)})}]}class Y extends e{constructor(e){super(),t(this,e,W,K,n,{file_id:0,max_width:6,max_height:7,active:1})}}function X(e){let t,n,s={ctx:e,current:null,token:null,pending:te,then:ee,catch:Z,value:6,error:7};return l(n=e[2](e[0]),s),{c(){t=y(),s.block.c()},l(e){t=y(),s.block.l(e)},m(e,n){h(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>t.parentNode,s.anchor=t},p(t,a){if(e=t,s.ctx=e,1&a&&n!==(n=e[2](e[0]))&&l(n,s));else{const t=e.slice();t[6]=s.resolved,s.block.p(t,a)}},d(e){e&&i(t),s.block.d(e),s.token=null,s=null}}}function Z(e){let t,n,l,c=e[7].message+"";return{c(){t=x(),n=s("pre"),l=m(c),this.h()},l(e){t=E(e),n=a(e,"PRE",{style:!0});var s=r(n);l=v(s,c),s.forEach(i),this.h()},h(){p(n,"color","red")},m(e,s){h(e,t,s),h(e,n,s),$(n,l)},p(e,t){1&t&&c!==(c=e[7].message+"")&&b(l,c)},d(e){e&&i(t),e&&i(n)}}}function ee(e){let t,n;return{c(){t=s("img"),this.h()},l(e){t=a(e,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){c(t,"class","img-fluid svelte-himda"),t.src!==(n=e[6])&&c(t,"src",n),c(t,"alt","")},m(e,n){h(e,t,n)},p(e,l){1&l&&t.src!==(n=e[6])&&c(t,"src",n)},d(e){e&&i(t)}}}function te(e){let t,n;return{c(){t=s("div"),this.h()},l(e){t=a(e,"DIV",{class:!0,role:!0,title:!0,"aria-hidden":!0}),r(t).forEach(i),this.h()},h(){c(t,"class","spinner-border svelte-himda"),c(t,"role","status"),c(t,"title",n="Downloading "+e[0]),c(t,"aria-hidden","true")},m(e,n){h(e,t,n)},p(e,l){1&l&&n!==(n="Downloading "+e[0])&&c(t,"title",n)},d(e){e&&i(t)}}}function ne(e){let t,n="object"==typeof e[1]&&B(e[1].mime),l=n&&X(e);return{c(){l&&l.c(),t=y()},l(e){l&&l.l(e),t=y()},m(e,n){l&&l.m(e,n),h(e,t,n)},p(e,[s]){2&s&&(n="object"==typeof e[1]&&B(e[1].mime)),n?l?l.p(e,s):(l=X(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:d,o:d,d(e){l&&l.d(e),e&&i(t)}}}function le(e,t,n){let l,{file_id:s}=t,{metadata:a}=t,{file:r=null}=t;return f(async()=>()=>{l&&URL.revokeObjectURL(l)}),e.$set=e=>{"file_id"in e&&n(0,s=e.file_id),"metadata"in e&&n(1,a=e.metadata),"file"in e&&n(3,r=e.file)},[s,a,async function(e){l&&URL.revokeObjectURL(l);const t=A(),i=await t.get_file({file_id:s});return n(3,r=new File([i],String(s)+a.ext,{type:a.mime})),l=URL.createObjectURL(r),l},r]}class se extends e{constructor(e){super(),t(this,e,le,ne,n,{file_id:0,metadata:1,file:3})}}function ae(e){let t,n,l,o,d,u,f,g,p,b,w,y,R;const U=[ie,re],L=[];function O(e,t){return"number"==typeof e[0]?0:1}o=O(e),d=L[o]=U[o](e);let P=e[0]>0&&de(e),S=e[0]<e[2].length-1&&ue(e);return{c(){t=s("div"),n=s("div"),l=s("div"),d.c(),u=x(),P&&P.c(),f=x(),S&&S.c(),g=x(),p=s("button"),b=m("❌"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);n=a(s,"DIV",{class:!0});var c=r(n);l=a(c,"DIV",{class:!0});var o=r(l);d.l(o),o.forEach(i),c.forEach(i),u=E(s),P&&P.l(s),f=E(s),S&&S.l(s),g=E(s),p=a(s,"BUTTON",{class:!0});var h=r(p);b=v(h,"❌"),h.forEach(i),s.forEach(i),this.h()},h(){c(l,"class","file current svelte-10eztrw"),c(n,"class","files svelte-10eztrw"),c(p,"class","close svelte-10eztrw"),c(t,"class","background svelte-10eztrw")},m(s,a){h(s,t,a),$(t,n),$(n,l),L[o].m(l,null),$(t,u),P&&P.m(t,null),$(t,f),S&&S.m(t,null),$(t,g),$(t,p),$(p,b),w=!0,y||(R=_(p,"click",e[6]),y=!0)},p(e,n){let s=o;o=O(e),o===s?L[o].p(e,n):(k(),I(L[s],1,1,()=>{L[s]=null}),D(),d=L[o],d||(d=L[o]=U[o](e),d.c()),V(d,1),d.m(l,null)),e[0]>0?P?P.p(e,n):(P=de(e),P.c(),P.m(t,f)):P&&(P.d(1),P=null),e[0]<e[2].length-1?S?S.p(e,n):(S=ue(e),S.c(),S.m(t,g)):S&&(S.d(1),S=null)},i(e){w||(V(d),w=!0)},o(e){I(d),w=!1},d(e){e&&i(t),L[o].d(),P&&P.d(),S&&S.d(),y=!1,R()}}}function re(e){let t,n,l,c;return{c(){t=s("pre"),n=m("index ["),l=m(e[0]),c=m("] is not a number"),this.h()},l(s){t=a(s,"PRE",{style:!0});var o=r(t);n=v(o,"index ["),l=v(o,e[0]),c=v(o,"] is not a number"),o.forEach(i),this.h()},h(){p(t,"color","red")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(t,c)},p(e,t){1&t&&b(l,e[0])},i:d,o:d,d(e){e&&i(t)}}}function ie(e){let t,n,s,a={ctx:e,current:null,token:null,pending:he,then:oe,catch:ce,value:10,error:11,blocks:[,,,]};return l(n=e[3](e[2][e[0]]),a),{c(){t=y(),a.block.c()},l(e){t=y(),a.block.l(e)},m(e,n){h(e,t,n),a.block.m(e,a.anchor=n),a.mount=()=>t.parentNode,a.anchor=t,s=!0},p(t,s){if(e=t,a.ctx=e,5&s&&n!==(n=e[3](e[2][e[0]]))&&l(n,a));else{const t=e.slice();t[10]=a.resolved,a.block.p(t,s)}},i(e){s||(V(a.block),s=!0)},o(e){for(let e=0;e<3;e+=1){const t=a.blocks[e];I(t)}s=!1},d(e){e&&i(t),a.block.d(e),a.token=null,a=null}}}function ce(e){let t,n,l,c,o,u,f,g,_,w,y,k,I,D,V,R,U=e[2].length+"",L=e[2][e[0]]+"",O=e[11].message+"";return{c(){t=s("p"),n=m("Querying\n              "),l=s("code"),c=m(e[0]),o=m("\n              of\n              "),u=s("code"),f=m("file_ids["),g=m(U),_=m("]"),w=x(),y=m(L),k=m("'s metadata"),I=x(),D=s("pre"),V=m(O),R=x(),this.h()},l(s){t=a(s,"P",{style:!0});var h=r(t);n=v(h,"Querying\n              "),l=a(h,"CODE",{});var d=r(l);c=v(d,e[0]),d.forEach(i),o=v(h,"\n              of\n              "),u=a(h,"CODE",{});var m=r(u);f=v(m,"file_ids["),g=v(m,U),_=v(m,"]"),m.forEach(i),w=E(h),y=v(h,L),k=v(h,"'s metadata"),h.forEach(i),I=E(s),D=a(s,"PRE",{style:!0});var p=r(D);V=v(p,O),p.forEach(i),R=E(s),this.h()},h(){p(t,"color","yellow"),p(D,"color","red")},m(e,s){h(e,t,s),$(t,n),$(t,l),$(l,c),$(t,o),$(t,u),$(u,f),$(u,g),$(u,_),$(t,w),$(t,y),$(t,k),h(e,I,s),h(e,D,s),$(D,V),h(e,R,s)},p(e,t){1&t&&b(c,e[0]),4&t&&U!==(U=e[2].length+"")&&b(g,U),5&t&&L!==(L=e[2][e[0]]+"")&&b(y,L),5&t&&O!==(O=e[11].message+"")&&b(V,O)},i:d,o:d,d(e){e&&i(t),e&&i(I),e&&i(D),e&&i(R)}}}function oe(e){let t,n;return t=new se({props:{file_id:e[2][e[0]],metadata:e[10]}}),{c(){R(t.$$.fragment)},l(e){U(t.$$.fragment,e)},m(e,l){L(t,e,l),n=!0},p(e,n){const l={};5&n&&(l.file_id=e[2][e[0]]),5&n&&(l.metadata=e[10]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){I(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function he(e){let t,n;return{c(){t=s("div"),this.h()},l(e){t=a(e,"DIV",{class:!0,role:!0,title:!0}),r(t).forEach(i),this.h()},h(){c(t,"class","spinner-border svelte-10eztrw"),c(t,"role","status"),c(t,"title",n="Querying "+e[2][e[0]]+"'s metadata")},m(e,n){h(e,t,n)},p(e,l){5&l&&n!==(n="Querying "+e[2][e[0]]+"'s metadata")&&c(t,"title",n)},i:d,o:d,d(e){e&&i(t)}}}function de(e){let t,n,l,o;return{c(){t=s("button"),n=m("◀"),this.h()},l(e){t=a(e,"BUTTON",{id:!0,class:!0});var l=r(t);n=v(l,"◀"),l.forEach(i),this.h()},h(){c(t,"id","previous"),c(t,"class","nav-buttons svelte-10eztrw")},m(s,a){h(s,t,a),$(t,n),l||(o=_(t,"click",e[4]),l=!0)},p:d,d(e){e&&i(t),l=!1,o()}}}function ue(e){let t,n,l,o;return{c(){t=s("button"),n=m("▶"),this.h()},l(e){t=a(e,"BUTTON",{id:!0,class:!0});var l=r(t);n=v(l,"▶"),l.forEach(i),this.h()},h(){c(t,"id","next"),c(t,"class","nav-buttons svelte-10eztrw")},m(s,a){h(s,t,a),$(t,n),l||(o=_(t,"click",e[5]),l=!0)},p:d,d(e){e&&i(t),l=!1,o()}}}function fe(e){let t,n,l=e[1]&&ae(e);return{c(){l&&l.c(),t=y()},l(e){l&&l.l(e),t=y()},m(e,s){l&&l.m(e,s),h(e,t,s),n=!0},p(e,[n]){e[1]?l?(l.p(e,n),2&n&&V(l,1)):(l=ae(e),l.c(),V(l,1),l.m(t.parentNode,t)):l&&(k(),I(l,1,1,()=>{l=null}),D())},i(e){n||(V(l),n=!0)},o(e){I(l),n=!1},d(e){l&&l.d(e),e&&i(t)}}}function ge(e,t,n){let l,{file_ids:s=[]}=t,{index:a=0}=t,{enabled:r=!1}=t,i=new Map;f(()=>{});return e.$set=e=>{"file_ids"in e&&n(2,s=e.file_ids),"index"in e&&n(0,a=e.index),"enabled"in e&&n(1,r=e.enabled)},[a,r,s,async function(e){if(i.has(e))return i.get(e);{l||(l=A());const{metadata:t}=await l.get_file_metadata({file_ids:[e]});return i.set(e,t[0]),t[0]}},()=>{n(0,a--,a)},()=>{n(0,a++,a)},()=>{n(1,r=!1)}]}class me extends e{constructor(e){super(),t(this,e,ge,fe,n,{file_ids:2,index:0,enabled:1})}}const{Map:ve}=z;function pe(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function $e(e,t){let n,l,o,d=t[23];l=new Y({props:{file_id:t[21],active:t[0]==t[23]}}),l.$on("click",(function(...e){return t[12](t[23],...e)}));const u=()=>t[13](n,d),f=()=>t[13](null,d);return{key:e,first:null,c(){n=s("div"),R(l.$$.fragment),this.h()},l(e){n=a(e,"DIV",{class:!0});var t=r(n);U(l.$$.fragment,t),t.forEach(i),this.h()},h(){c(n,"class","entry svelte-1009vrm"),this.first=n},m(e,t){h(e,n,t),L(l,n,null),u(),o=!0},p(e,n){t=e;const s={};4&n&&(s.file_id=t[21]),5&n&&(s.active=t[0]==t[23]),l.$set(s),d!==t[23]&&(f(),d=t[23],u())},i(e){o||(V(l.$$.fragment,e),o=!0)},o(e){I(l.$$.fragment,e),o=!1},d(e){e&&i(n),O(l),f()}}}function be(e){let t,n,l,o,d,u,f,g,w,y,k,I,D,V,R,U,L,O,P,T,M=e[2].length+"",z=e[1].length+"",N=e[2].length+"";return{c(){t=s("div"),n=s("div"),l=s("p"),o=m("Loaded "),d=m(M),u=m(" / "),f=m(z),g=x(),w=s("div"),y=s("div"),k=m(N),V=x(),R=s("div"),U=s("button"),L=m("Load More"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);n=a(s,"DIV",{class:!0});var c=r(n);l=a(c,"P",{});var h=r(l);o=v(h,"Loaded "),d=v(h,M),u=v(h," / "),f=v(h,z),h.forEach(i),g=E(c),w=a(c,"DIV",{class:!0});var m=r(w);y=a(m,"DIV",{class:!0,role:!0,style:!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0});var p=r(y);k=v(p,N),p.forEach(i),m.forEach(i),c.forEach(i),s.forEach(i),V=E(e),R=a(e,"DIV",{class:!0});var $=r(R);U=a($,"BUTTON",{class:!0,disabled:!0});var b=r(U);L=v(b,"Load More"),b.forEach(i),$.forEach(i),this.h()},h(){c(y,"class","progress-bar"),c(y,"role","progressbar"),p(y,"width",e[2].length/e[1].length*100+"%"),c(y,"aria-valuenow",I=e[2].length),c(y,"aria-valuemin","0"),c(y,"aria-valuemax",D=e[1].length),c(w,"class","progress"),c(n,"class","col col-12"),c(t,"class","row"),c(U,"class","btn btn-primary m-3"),U.disabled=O=e[2].length>=e[1].length,c(R,"class","col")},m(s,a){h(s,t,a),$(t,n),$(n,l),$(l,o),$(l,d),$(l,u),$(l,f),$(n,g),$(n,w),$(w,y),$(y,k),h(s,V,a),h(s,R,a),$(R,U),$(U,L),P||(T=_(U,"click",S(e[7])),P=!0)},p(e,t){4&t&&M!==(M=e[2].length+"")&&b(d,M),2&t&&z!==(z=e[1].length+"")&&b(f,z),4&t&&N!==(N=e[2].length+"")&&b(k,N),6&t&&p(y,"width",e[2].length/e[1].length*100+"%"),4&t&&I!==(I=e[2].length)&&c(y,"aria-valuenow",I),2&t&&D!==(D=e[1].length)&&c(y,"aria-valuemax",D),6&t&&O!==(O=e[2].length>=e[1].length)&&(U.disabled=O)},d(e){e&&i(t),e&&i(V),e&&i(R),P=!1,T()}}}function _e(e){let t,n,l,o,d,u,f,m,v,b,_=[],w=new ve;function y(t){e[9].call(null,t)}function S(t){e[10].call(null,t)}function z(t){e[11].call(null,t)}let j={};void 0!==e[0]&&(j.index=e[0]),void 0!==e[5]&&(j.enabled=e[5]),void 0!==e[2]&&(j.file_ids=e[2]),t=new me({props:j}),g.push(()=>P(t,"index",y)),g.push(()=>P(t,"enabled",S)),g.push(()=>P(t,"file_ids",z));let Q=e[2];const A=e=>e[21];for(let t=0;t<Q.length;t+=1){let n=pe(e,Q,t),l=A(n);w.set(l,_[t]=$e(l,n))}let B=e[1]&&e[1].length>0&&be(e);return{c(){R(t.$$.fragment),d=x(),u=s("div");for(let e=0;e<_.length;e+=1)_[e].c();f=x(),m=s("div"),v=s("div"),B&&B.c(),this.h()},l(e){U(t.$$.fragment,e),d=E(e),u=a(e,"DIV",{class:!0});var n=r(u);for(let e=0;e<_.length;e+=1)_[e].l(n);f=E(n),m=a(n,"DIV",{class:!0,style:!0});var l=r(m);v=a(l,"DIV",{class:!0});var s=r(v);B&&B.l(s),s.forEach(i),l.forEach(i),n.forEach(i),this.h()},h(){c(v,"class","container"),c(m,"class","next-batch-placeholder text-center svelte-1009vrm"),p(m,"background-color",e[1]&&e[1].length?"":"transparent"),c(u,"class","gallery")},m(n,l){L(t,n,l),h(n,d,l),h(n,u,l);for(let e=0;e<_.length;e+=1)_[e].m(u,null);$(u,f),$(u,m),$(m,v),B&&B.m(v,null),e[14](m),e[15](u),b=!0},p(e,[s]){const a={};if(!n&&1&s&&(n=!0,a.index=e[0],T(()=>n=!1)),!l&&32&s&&(l=!0,a.enabled=e[5],T(()=>l=!1)),!o&&4&s&&(o=!0,a.file_ids=e[2],T(()=>o=!1)),t.$set(a),45&s){const t=e[2];k(),_=M(_,s,A,1,e,t,w,u,N,$e,f,pe),D()}e[1]&&e[1].length>0?B?B.p(e,s):(B=be(e),B.c(),B.m(v,null)):B&&(B.d(1),B=null),(!b||2&s)&&p(m,"background-color",e[1]&&e[1].length?"":"transparent")},i(e){if(!b){V(t.$$.fragment,e);for(let e=0;e<Q.length;e+=1)V(_[e]);b=!0}},o(e){I(t.$$.fragment,e);for(let e=0;e<_.length;e+=1)I(_[e]);b=!1},d(n){O(t,n),n&&i(d),n&&i(u);for(let e=0;e<_.length;e+=1)_[e].d();B&&B.d(),e[14](null),e[15](null)}}}function we(e,t,n){let l,s,{file_ids:a=[]}=t,r=[],{range:i=10}=t,{index:c=0}=t,o=0,h=[],d=[],u=0,m=!1;function v(){if(a.length>0&&a.length!==h.length){const e=h.length,t=e+i-1,l=a.slice(e,Math.min(t,a.length));n(2,h=h.concat(l))}}f(()=>{const e=new IntersectionObserver(e=>{for(const t of e)switch(t.target){case s:v()}});return e.observe(s),()=>{e.disconnect()}});return e.$set=e=>{"file_ids"in e&&n(1,a=e.file_ids),"range"in e&&n(8,i=e.range),"index"in e&&n(0,c=e.index)},e.$$.update=()=>{65538&e.$$.dirty&&a!==r&&(n(16,r=a),n(18,u=0),n(0,c=0),n(17,o=0),n(2,h=[])),262145&e.$$.dirty&&n(18,u=Math.max(c,u)),262150&e.$$.dirty&&u>=h.length-2&&a.length>0&&(0===h.length?async function(){for(;l.scrollHeight<window.innerHeight;)v(),await j(),await C(200)}():v()),131083&e.$$.dirty&&a.length>0&&c!==o&&d&&d[c]&&(n(17,o=c),d[c].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))},[c,a,h,d,l,m,s,v,i,function(e){c=e,n(0,c),n(1,a),n(16,r)},function(e){m=e,n(5,m)},function(e){h=e,n(2,h),n(1,a),n(16,r)},(e,t)=>{n(0,c=e),n(5,m=!0)},function(e,t){d[t]!==e&&g[e?"unshift":"push"](()=>{d[t]=e,n(3,d),n(2,h),n(1,a),n(16,r)})},function(e){g[e?"unshift":"push"](()=>{s=e,n(6,s)})},function(e){g[e?"unshift":"push"](()=>{l=e,n(4,l)})}]}class xe extends e{constructor(e){super(),t(this,e,we,_e,n,{file_ids:1,range:8,index:0})}}function Ee(e,t,n){const l=e.slice();return l[11]=t[n],l}function ye(e){let t,n,l=e[11]+"";return{c(){t=s("span"),n=m(l),this.h()},l(e){t=a(e,"SPAN",{class:!0});var s=r(t);n=v(s,l),s.forEach(i),this.h()},h(){c(t,"class","badge bg-secondary")},m(e,l){h(e,t,l),$(t,n)},p(e,t){2&t&&l!==(l=e[11]+"")&&b(n,l)},d(e){e&&i(t)}}}function ke(e){let t,n,l,o,d,u,f,g,p,b,_,w=e[1],y=[];for(let t=0;t<w.length;t+=1)y[t]=ye(Ee(e,w,t));return b=new H({props:{tags:e[1],onSearch:e[4]}}),{c(){t=s("div"),n=s("div"),l=s("details"),o=s("summary"),d=s("span"),u=m("Search:"),f=x();for(let e=0;e<y.length;e+=1)y[e].c();g=x(),p=s("div"),R(b.$$.fragment),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);n=a(s,"DIV",{class:!0});var c=r(n);l=a(c,"DETAILS",{});var h=r(l);o=a(h,"SUMMARY",{class:!0});var m=r(o);d=a(m,"SPAN",{});var $=r(d);u=v($,"Search:"),$.forEach(i),f=E(m);for(let e=0;e<y.length;e+=1)y[e].l(m);m.forEach(i),g=E(h),p=a(h,"DIV",{class:!0});var _=r(p);U(b.$$.fragment,_),_.forEach(i),h.forEach(i),c.forEach(i),s.forEach(i),this.h()},h(){c(o,"class","card-header"),c(p,"class","card-body"),c(n,"class","card"),c(t,"class","col")},m(s,a){h(s,t,a),$(t,n),$(n,l),$(l,o),$(o,d),$(d,u),$(o,f);for(let e=0;e<y.length;e+=1)y[e].m(o,null);e[3](o),$(l,g),$(l,p),L(b,p,null),_=!0},p(e,t){if(2&t){let n;for(w=e[1],n=0;n<w.length;n+=1){const l=Ee(e,w,n);y[n]?y[n].p(l,t):(y[n]=ye(l),y[n].c(),y[n].m(o,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=w.length}const n={};2&t&&(n.tags=e[1]),2&t&&(n.onSearch=e[4]),b.$set(n)},i(e){_||(V(b.$$.fragment,e),_=!0)},o(e){I(b.$$.fragment,e),_=!1},d(n){n&&i(t),Q(y,n),e[3](null),O(b)}}}function Ie(e){let t,n,l,s,a;function r(t){e[5].call(null,t)}t=new G({props:{$$slots:{default:[ke]},$$scope:{ctx:e}}});let c={};return void 0!==e[0]&&(c.file_ids=e[0]),l=new xe({props:c}),g.push(()=>P(l,"file_ids",r)),{c(){R(t.$$.fragment),n=x(),R(l.$$.fragment)},l(e){U(t.$$.fragment,e),n=E(e),U(l.$$.fragment,e)},m(e,s){L(t,e,s),h(e,n,s),L(l,e,s),a=!0},p(e,[n]){const a={};16390&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);const r={};!s&&1&n&&(s=!0,r.file_ids=e[0],T(()=>s=!1)),l.$set(r)},i(e){a||(V(t.$$.fragment,e),V(l.$$.fragment,e),a=!0)},o(e){I(t.$$.fragment,e),I(l.$$.fragment,e),a=!1},d(e){O(t,e),e&&i(n),O(l,e)}}}function De(e,t,n){let l,s=[],a=[];f(()=>{const e=window.location.search,t=new URLSearchParams(e),l=t.get("q");if(l){const e=JSON.parse(l);n(1,a=e)}t.get("id")});return e.$$.update=()=>{2&e.$$.dirty&&async function(e){if(l){const t=A(),l=await t.search_files(e,!0,!0);console.log("Recieved ",s.length," files."),n(0,s=l.file_ids)}}(a)},[s,a,l,function(e){g[e?"unshift":"push"](()=>{l=e,n(2,l)})},e=>{console.log("tags set"),n(1,a=e)},function(e){s=e,n(0,s)}]}export default class extends e{constructor(e){super(),t(this,e,De,Ie,n,{})}}
