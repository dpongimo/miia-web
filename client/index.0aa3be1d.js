import{w as a,S as e,i as s,s as r,e as t,c as n,a as c,d as l,b as o,f as i,n as d,o as h,t as u,g as f,h as m,l as p,j as y,k as g,m as v,p as b,q as $,r as E,u as w,v as I,x as k,y as S,z as T,A as N,B as C,C as V,D as H}from"./client.1412d77d.js";import{G as O,r as D,P,T as x}from"./TagSearch.f51d5c0d.js";const _=a("No Error"),R=a(!1);function U(a){let e,s,r,d,h,w,I,k,S,T,N,C,V,H,O,D=!a[1]&&A(a);return{c(){e=t("form"),s=t("label"),r=u("Hydrus Client URL"),d=y(),h=t("div"),D&&D.c(),w=y(),I=t("input"),k=y(),S=t("button"),T=u("Validate Key"),N=y(),C=t("div"),V=u("The generated API key from your Hydrus Client"),this.h()},l(a){e=n(a,"FORM",{id:!0});var t=c(e);s=n(t,"LABEL",{for:!0,class:!0});var o=c(s);r=f(o,"Hydrus Client URL"),o.forEach(l),d=g(t),h=n(t,"DIV",{class:!0});var i=c(h);D&&D.l(i),w=g(i),I=n(i,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),k=g(i),S=n(i,"BUTTON",{class:!0,type:!0});var u=c(S);T=f(u,"Validate Key"),u.forEach(l),i.forEach(l),N=g(t),C=n(t,"DIV",{id:!0,class:!0});var m=c(C);V=f(m,"The generated API key from your Hydrus Client"),m.forEach(l),t.forEach(l),this.h()},h(){o(s,"for","key-input"),o(s,"class","form-label"),o(I,"id","key-input"),o(I,"class","form-control"),o(I,"type","password"),o(I,"aria-describedby","key-help"),o(S,"class","btn"),o(S,"type","submit"),v(S,"btn-secondary",!a[1]),v(S,"btn-primary",!!a[1]),o(h,"class","input-group"),o(C,"id","key-help"),o(C,"class","form-text"),o(e,"id","connect-key")},m(t,n){i(t,e,n),m(e,s),m(s,r),m(e,d),m(e,h),D&&D.m(h,null),m(h,w),m(h,I),b(I,a[2]),m(h,k),m(h,S),m(S,T),m(e,N),m(e,C),m(C,V),H||(O=[p(I,"input",a[12]),p(e,"submit",$(a[13]))],H=!0)},p(a,e){a[1]?D&&(D.d(1),D=null):D?D.p(a,e):(D=A(a),D.c(),D.m(h,w)),4&e&&I.value!==a[2]&&b(I,a[2]),2&e&&v(S,"btn-secondary",!a[1]),2&e&&v(S,"btn-primary",!!a[1])},d(a){a&&l(e),D&&D.d(),H=!1,E(O)}}}function L(a){let e,s,r,d,h,w,k,S,T,N,C,V,H,O,D,P,x,_=a[3]&&B(a),R=a[4].length>0&&M(a);return{c(){e=t("form"),s=t("label"),r=u("Hydrus Client URL"),d=y(),h=t("div"),w=t("input"),k=y(),S=t("button"),T=u("Connect"),N=y(),C=t("div"),V=u("The IP address or domain and port of your Hydrus Client"),H=y(),_&&_.c(),O=y(),R&&R.c(),D=I(),this.h()},l(a){e=n(a,"FORM",{id:!0});var t=c(e);s=n(t,"LABEL",{for:!0,class:!0});var o=c(s);r=f(o,"Hydrus Client URL"),o.forEach(l),d=g(t),h=n(t,"DIV",{class:!0});var i=c(h);w=n(i,"INPUT",{id:!0,class:!0,type:!0,"aria-describedby":!0}),k=g(i),S=n(i,"BUTTON",{class:!0,type:!0,disabled:!0});var u=c(S);T=f(u,"Connect"),u.forEach(l),i.forEach(l),N=g(t),C=n(t,"DIV",{id:!0,class:!0});var m=c(C);V=f(m,"The IP address or domain and port of your Hydrus Client"),m.forEach(l),t.forEach(l),H=g(a),_&&_.l(a),O=g(a),R&&R.l(a),D=I(),this.h()},h(){o(s,"for","url-input"),o(s,"class","form-label"),o(w,"id","url-input"),o(w,"class","form-control"),o(w,"type","url"),o(w,"aria-describedby","url-help"),o(S,"class","btn btn-primary"),o(S,"type","submit"),S.disabled=a[3],v(S,"disabled",a[3]),o(h,"class","input-group"),o(C,"id","url-help"),o(C,"class","form-text"),o(e,"id","connect-address input-group")},m(t,n){i(t,e,n),m(e,s),m(s,r),m(e,d),m(e,h),m(h,w),b(w,a[0]),m(h,k),m(h,S),m(S,T),m(e,N),m(e,C),m(C,V),i(t,H,n),_&&_.m(t,n),i(t,O,n),R&&R.m(t,n),i(t,D,n),P||(x=[p(w,"input",a[10]),p(S,"click",a[7]),p(e,"submit",$(a[7]))],P=!0)},p(a,e){1&e&&b(w,a[0]),8&e&&(S.disabled=a[3]),8&e&&v(S,"disabled",a[3]),a[3]?_?_.p(a,e):(_=B(a),_.c(),_.m(O.parentNode,O)):_&&(_.d(1),_=null),a[4].length>0?R?R.p(a,e):(R=M(a),R.c(),R.m(D.parentNode,D)):R&&(R.d(1),R=null)},d(a){a&&l(e),a&&l(H),_&&_.d(a),a&&l(O),R&&R.d(a),a&&l(D),P=!1,E(x)}}}function A(a){let e,s,r,h,y;return{c(){e=t("div"),s=t("button"),r=u("Request Temporary Key"),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"BUTTON",{class:!0});var o=c(s);r=f(o,"Request Temporary Key"),o.forEach(l),t.forEach(l),this.h()},h(){o(s,"class","btn btn-primary"),o(e,"class","request-new-key")},m(t,n){i(t,e,n),m(e,s),m(s,r),h||(y=p(s,"click",a[8]),h=!0)},p:d,d(a){a&&l(e),h=!1,y()}}}function B(a){let e,s,r,d,h=!a[5]&&q(a),u=!a[6]&&!!a[1]&&J();return{c(){e=t("div"),s=t("div"),r=y(),h&&h.c(),d=y(),u&&u.c(),this.h()},l(a){e=n(a,"DIV",{class:!0,role:!0});var t=c(e);s=n(t,"DIV",{class:!0,role:!0,"aria-hidden":!0}),c(s).forEach(l),r=g(t),h&&h.l(t),d=g(t),u&&u.l(t),t.forEach(l),this.h()},h(){o(s,"class","spinner-border"),o(s,"role","status"),o(s,"aria-hidden","true"),o(e,"class","alert alert-primary d-flex align-items-left"),o(e,"role","alert")},m(a,t){i(a,e,t),m(e,s),m(e,r),h&&h.m(e,null),m(e,d),u&&u.m(e,null)},p(a,s){a[5]?h&&(h.d(1),h=null):h?h.p(a,s):(h=q(a),h.c(),h.m(e,d)),!a[6]&&a[1]?u||(u=J(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(a){a&&l(e),h&&h.d(),u&&u.d()}}}function q(a){let e,s,r,o,d;return{c(){e=t("p"),s=u("Connecting to\n            "),r=t("strong"),o=u(a[0]),d=u("\n            ...")},l(t){e=n(t,"P",{});var i=c(e);s=f(i,"Connecting to\n            "),r=n(i,"STRONG",{});var h=c(r);o=f(h,a[0]),h.forEach(l),d=f(i,"\n            ..."),i.forEach(l)},m(a,t){i(a,e,t),m(e,s),m(e,r),m(r,o),m(e,d)},p(a,e){1&e&&w(o,a[0])},d(a){a&&l(e)}}}function J(a){let e,s;return{c(){e=t("p"),s=u("Validating key...")},l(a){e=n(a,"P",{});var r=c(e);s=f(r,"Validating key..."),r.forEach(l)},m(a,r){i(a,e,r),m(e,s)},d(a){a&&l(e)}}}function M(a){let e,s,r,d,h,v,b,$,E,I,k,S,T,N,C,V=a[5]?"while validating your key":"while connecting";return{c(){e=t("div"),s=t("h4"),r=u("Error "),d=u(V),h=y(),v=t("hr"),b=y(),$=t("code"),E=u(a[4]),I=y(),k=t("button"),S=t("span"),T=u("×"),this.h()},l(t){e=n(t,"DIV",{class:!0,role:!0});var o=c(e);s=n(o,"H4",{class:!0});var i=c(s);r=f(i,"Error "),d=f(i,V),i.forEach(l),h=g(o),v=n(o,"HR",{}),b=g(o),$=n(o,"CODE",{class:!0});var u=c($);E=f(u,a[4]),u.forEach(l),I=g(o),k=n(o,"BUTTON",{type:!0,class:!0,"data-dismiss":!0,"aria-label":!0});var m=c(k);S=n(m,"SPAN",{"aria-hidden":!0});var p=c(S);T=f(p,"×"),p.forEach(l),m.forEach(l),o.forEach(l),this.h()},h(){o(s,"class","alert-heading"),o($,"class","mb-0"),o(S,"aria-hidden","true"),o(k,"type","button"),o(k,"class","close"),o(k,"data-dismiss","alert"),o(k,"aria-label","Close"),o(e,"class","alert alert-danger alert-dismissible fade show"),o(e,"role","alert")},m(t,n){i(t,e,n),m(e,s),m(s,r),m(s,d),m(e,h),m(e,v),m(e,b),m(e,$),m($,E),m(e,I),m(e,k),m(k,S),m(S,T),N||(C=p(k,"click",a[11]),N=!0)},p(a,e){32&e&&V!==(V=a[5]?"while validating your key":"while connecting")&&w(d,V),16&e&&w(E,a[4])},d(a){a&&l(e),N=!1,C()}}}function j(a){let e;function s(a,e){return a[5]?a[6]?void 0:U:L}let r=s(a),h=r&&r(a);return{c(){e=t("section"),h&&h.c(),this.h()},l(a){e=n(a,"SECTION",{class:!0});var s=c(e);h&&h.l(s),s.forEach(l),this.h()},h(){o(e,"class","container")},m(a,s){i(a,e,s),h&&h.m(e,null)},p(a,[t]){r===(r=s(a))&&h?h.p(a,t):(h&&h.d(1),h=r&&r(a),h&&(h.c(),h.m(e,null)))},i:d,o:d,d(a){a&&l(e),h&&h.d()}}}function K(a,e,s){let r="http://127.0.0.1:45869",t="",n="",c=!1,l="",o=!1,i=!1;async function d(){if(c)return;s(4,l=""),s(3,c=!0);const a=O(r);try{const{version:e}=await a.api_version();console.log("Connected with API version: "+e),localStorage.setItem("address",JSON.stringify(r)),s(5,o=!0),t&&await f()}catch(a){console.error(a),_.set(a),R.set(!1),s(4,l=String(a))}s(3,c=!1)}async function u(){const a=O();s(4,l="");try{const{access_key:e}=await a.request_new_permissions("miia-web",D);localStorage.setItem("access_key",JSON.stringify(t)),s(1,t=e),s(2,n=t)}catch(a){console.error(a),s(4,l=String(a))}}async function f(){s(3,c=!0);const a=O();a.access_key=t,s(4,l="");try{const{human_description:e}=await a.verify_access_key(t);localStorage.setItem("access_key",JSON.stringify(t)),console.log(e),s(6,i=!0),R.set(!0)}catch(a){console.error(a),s(4,l=String(a))}s(3,c=!1)}h(()=>{const a=localStorage.getItem("address");a&&s(0,r=JSON.parse(a));const e=localStorage.getItem("access_key");e&&s(1,t=JSON.parse(e)),(async()=>{if(a)try{await d()}catch(a){console.error(a),s(4,l=String(a))}})()});return[r,t,n,c,l,o,i,d,u,f,function(){r=this.value,s(0,r)},()=>{s(4,l="")},function(){n=this.value,s(2,n)},()=>{n?(s(1,t=n),f()):u()}]}class W extends e{constructor(a){super(),s(this,a,K,j,r,{})}}function F(a){let e,s,r,d,h,p;return{c(){e=t("div"),s=t("h1"),r=u("Miia Web!"),d=y(),h=t("p"),p=u("a web client for Hydrus"),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);s=n(t,"H1",{});var o=c(s);r=f(o,"Miia Web!"),o.forEach(l),d=g(t),h=n(t,"P",{});var i=c(h);p=f(i,"a web client for Hydrus"),i.forEach(l),t.forEach(l),this.h()},h(){o(e,"class","col")},m(a,t){i(a,e,t),m(e,s),m(s,r),m(e,d),m(e,h),m(h,p)},d(a){a&&l(e)}}}function G(a){let e,s,r,d,h,p,v,b,$;return s=new W({}),b=new x({}),{c(){e=t("div"),k(s.$$.fragment),r=y(),d=t("div"),h=t("h2"),p=u("New Search"),v=y(),k(b.$$.fragment),this.h()},l(a){e=n(a,"DIV",{class:!0});var t=c(e);T(s.$$.fragment,t),t.forEach(l),r=g(a),d=n(a,"DIV",{class:!0});var o=c(d);h=n(o,"H2",{});var i=c(h);p=f(i,"New Search"),i.forEach(l),v=g(o),T(b.$$.fragment,o),o.forEach(l),this.h()},h(){o(e,"class","col col-12"),o(d,"class","col col-12")},m(a,t){i(a,e,t),N(s,e,null),i(a,r,t),i(a,d,t),m(d,h),m(h,p),m(d,v),N(b,d,null),$=!0},i(a){$||(C(s.$$.fragment,a),C(b.$$.fragment,a),$=!0)},o(a){V(s.$$.fragment,a),V(b.$$.fragment,a),$=!1},d(a){a&&l(e),H(s),a&&l(r),a&&l(d),H(b)}}}function z(a){let e,s,r,t,n;return s=new P({props:{$$slots:{default:[F]},$$scope:{ctx:a}}}),t=new P({props:{$$slots:{default:[G]},$$scope:{ctx:a}}}),{c(){e=y(),k(s.$$.fragment),r=y(),k(t.$$.fragment),this.h()},l(a){S('[data-svelte="svelte-1nj90w7"]',document.head).forEach(l),e=g(a),T(s.$$.fragment,a),r=g(a),T(t.$$.fragment,a),this.h()},h(){document.title="Miia Web"},m(a,c){i(a,e,c),N(s,a,c),i(a,r,c),N(t,a,c),n=!0},p(a,[e]){const r={};2&e&&(r.$$scope={dirty:e,ctx:a}),s.$set(r);const n={};2&e&&(n.$$scope={dirty:e,ctx:a}),t.$set(n)},i(a){n||(C(s.$$.fragment,a),C(t.$$.fragment,a),n=!0)},o(a){V(s.$$.fragment,a),V(t.$$.fragment,a),n=!1},d(a){a&&l(e),H(s,a),a&&l(r),H(t,a)}}}function Q(a){return[]}export default class extends e{constructor(a){super(),s(this,a,Q,z,r,{})}}
