import{w as a,S as t,i as e,s,e as r,a as n,n as c,d as o,o as l,b as i,t as u,c as d,f as h,g as f,h as m,j as p,l as y,k as v,m as g,p as b,q as E,r as w,u as $,v as k,x as S,y as I,z as N,A as T,B as _,C as V}from"./client.5eb595c1.js";import{G as O,r as C,T as P}from"./TagSearch.a52a3657.js";const U=a("No Error"),D=a(!1);function H(a){let t,e,s,r,c,l,$,k,S,I=!a[1]&&x(a);return{c(){t=i("div"),I&&I.c(),e=v(),s=i("div"),r=i("input"),c=v(),l=i("button"),$=u("Validate Manual Key"),this.h()},l(a){t=d(a,"DIV",{id:!0});var n=h(t);I&&I.l(n),e=g(n),s=d(n,"DIV",{class:!0});var i=h(s);r=d(i,"INPUT",{class:!0,type:!0}),c=g(i),l=d(i,"BUTTON",{class:!0});var u=h(l);$=f(u,"Validate Manual Key"),u.forEach(o),i.forEach(o),n.forEach(o),this.h()},h(){m(r,"class","form-control"),m(r,"type","password"),m(l,"class","btn"),b(l,"btn-secondary",!a[1]),b(l,"btn-primary",!!a[1]),m(s,"class","add-manual-key input-group"),m(t,"id","connect-key")},m(o,i){n(o,t,i),I&&I.m(t,null),p(t,e),p(t,s),p(s,r),E(r,a[2]),p(s,c),p(s,l),p(l,$),k||(S=[y(r,"input",a[10]),y(l,"click",a[11])],k=!0)},p(a,s){a[1]?I&&(I.d(1),I=null):I?I.p(a,s):(I=x(a),I.c(),I.m(t,e)),4&s&&r.value!==a[2]&&E(r,a[2]),2&s&&b(l,"btn-secondary",!a[1]),2&s&&b(l,"btn-primary",!!a[1])},d(a){a&&o(t),I&&I.d(),k=!1,w(S)}}}function q(a){let t,e,s,r,c,l,$,k,S,I,N,T=a[3]&&J(a);return{c(){t=i("div"),e=i("p"),s=u("Hydrus Client URL"),r=v(),c=i("input"),l=v(),$=i("button"),k=u("Connect"),S=v(),T&&T.c(),this.h()},l(a){t=d(a,"DIV",{id:!0});var n=h(t);e=d(n,"P",{});var i=h(e);s=f(i,"Hydrus Client URL"),i.forEach(o),r=g(n),c=d(n,"INPUT",{}),l=g(n),$=d(n,"BUTTON",{class:!0});var u=h($);k=f(u,"Connect"),u.forEach(o),S=g(n),T&&T.l(n),n.forEach(o),this.h()},h(){m($,"class","btn btn-primary"),b($,"disabled",a[3]),m(t,"id","connect-address")},m(o,i){n(o,t,i),p(t,e),p(e,s),p(t,r),p(t,c),E(c,a[0]),p(t,l),p(t,$),p($,k),p(t,S),T&&T.m(t,null),I||(N=[y(c,"input",a[9]),y($,"click",a[6])],I=!0)},p(a,e){1&e&&c.value!==a[0]&&E(c,a[0]),8&e&&b($,"disabled",a[3]),a[3]?T?T.p(a,e):(T=J(a),T.c(),T.m(t,null)):T&&(T.d(1),T=null)},d(a){a&&o(t),T&&T.d(),I=!1,w(N)}}}function x(a){let t,e,s,r,l;return{c(){t=i("div"),e=i("button"),s=u("Request Temporary Key"),this.h()},l(a){t=d(a,"DIV",{class:!0});var r=h(t);e=d(r,"BUTTON",{class:!0});var n=h(e);s=f(n,"Request Temporary Key"),n.forEach(o),r.forEach(o),this.h()},h(){m(e,"class","btn btn-primary"),m(t,"class","request-new-key")},m(c,o){n(c,t,o),p(t,e),p(e,s),r||(l=y(e,"click",a[7]),r=!0)},p:c,d(a){a&&o(t),r=!1,l()}}}function J(a){let t,e,s,r,c=!a[4]&&M(a),l=!a[5]&&!!a[1]&&R();return{c(){t=i("div"),e=i("div"),s=v(),c&&c.c(),r=v(),l&&l.c(),this.h()},l(a){t=d(a,"DIV",{class:!0,role:!0});var n=h(t);e=d(n,"DIV",{class:!0,role:!0,"aria-hidden":!0}),h(e).forEach(o),s=g(n),c&&c.l(n),r=g(n),l&&l.l(n),n.forEach(o),this.h()},h(){m(e,"class","spinner-border"),m(e,"role","status"),m(e,"aria-hidden","true"),m(t,"class","alert alert-primary d-flex align-items-left"),m(t,"role","alert")},m(a,o){n(a,t,o),p(t,e),p(t,s),c&&c.m(t,null),p(t,r),l&&l.m(t,null)},p(a,e){a[4]?c&&(c.d(1),c=null):c?c.p(a,e):(c=M(a),c.c(),c.m(t,r)),!a[5]&&a[1]?l||(l=R(),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(a){a&&o(t),c&&c.d(),l&&l.d()}}}function M(a){let t,e,s,r,c;return{c(){t=i("p"),e=u("Connecting to\n            "),s=i("strong"),r=u(a[0]),c=u("\n            ...")},l(n){t=d(n,"P",{});var l=h(t);e=f(l,"Connecting to\n            "),s=d(l,"STRONG",{});var i=h(s);r=f(i,a[0]),i.forEach(o),c=f(l,"\n            ..."),l.forEach(o)},m(a,o){n(a,t,o),p(t,e),p(t,s),p(s,r),p(t,c)},p(a,t){1&t&&$(r,a[0])},d(a){a&&o(t)}}}function R(a){let t,e;return{c(){t=i("p"),e=u("Validating key...")},l(a){t=d(a,"P",{});var s=h(t);e=f(s,"Validating key..."),s.forEach(o)},m(a,s){n(a,t,s),p(t,e)},d(a){a&&o(t)}}}function j(a){let t;function e(a,t){return a[4]?a[5]?void 0:H:q}let s=e(a),l=s&&s(a);return{c(){l&&l.c(),t=r()},l(a){l&&l.l(a),t=r()},m(a,e){l&&l.m(a,e),n(a,t,e)},p(a,[r]){s===(s=e(a))&&l?l.p(a,r):(l&&l.d(1),l=s&&s(a),l&&(l.c(),l.m(t.parentNode,t)))},i:c,o:c,d(a){l&&l.d(a),a&&o(t)}}}function B(a,t,e){let s="http://127.0.0.1:45869",r="",n="",c=!1,o=!1,i=!1;async function u(){if(c)return;e(3,c=!0);const a=O(s);try{const{version:t}=await a.api_version();console.log("Connected with API version: "+t),localStorage.setItem("address",JSON.stringify(s)),e(4,o=!0),r&&await d()}catch(a){console.error(a),U.set(a),D.set(!1)}e(3,c=!1)}async function d(){e(3,c=!0);const a=O();a.access_key=r;try{const{human_description:t}=await a.verify_access_key(r);localStorage.setItem("access_key",JSON.stringify(r)),console.log(t),e(5,i=!0),D.set(!0)}catch(a){console.error(a)}e(3,c=!1)}l(()=>{const a=localStorage.getItem("address");a&&e(0,s=JSON.parse(a));const t=localStorage.getItem("access_key");t&&e(1,r=JSON.parse(t)),(async()=>{if(a)try{await u()}catch(a){console.error(a)}})()});return[s,r,n,c,o,i,u,async function(){const a=O();try{const{access_key:t}=await a.request_new_permissions("miia-web",C);localStorage.setItem("access_key",JSON.stringify(r)),e(1,r=t),e(2,n=r)}catch(a){console.error(a)}},d,function(){s=this.value,e(0,s)},function(){n=this.value,e(2,n)},()=>{e(1,r=n),d()}]}class K extends t{constructor(a){super(),e(this,a,B,j,s,{})}}function W(a){let t,e,s,r,l,m,y,b,E,w,$,O,C,U;return b=new K({}),C=new P({}),{c(){t=v(),e=i("h1"),s=u("Miia Web!"),r=v(),l=i("p"),m=u("a web client for Hydrus"),y=v(),k(b.$$.fragment),E=v(),w=i("h2"),$=u("Search"),O=v(),k(C.$$.fragment),this.h()},l(a){S('[data-svelte="svelte-1nj90w7"]',document.head).forEach(o),t=g(a),e=d(a,"H1",{});var n=h(e);s=f(n,"Miia Web!"),n.forEach(o),r=g(a),l=d(a,"P",{});var c=h(l);m=f(c,"a web client for Hydrus"),c.forEach(o),y=g(a),I(b.$$.fragment,a),E=g(a),w=d(a,"H2",{});var i=h(w);$=f(i,"Search"),i.forEach(o),O=g(a),I(C.$$.fragment,a),this.h()},h(){document.title="Miia Web"},m(a,c){n(a,t,c),n(a,e,c),p(e,s),n(a,r,c),n(a,l,c),p(l,m),n(a,y,c),N(b,a,c),n(a,E,c),n(a,w,c),p(w,$),n(a,O,c),N(C,a,c),U=!0},p:c,i(a){U||(T(b.$$.fragment,a),T(C.$$.fragment,a),U=!0)},o(a){_(b.$$.fragment,a),_(C.$$.fragment,a),U=!1},d(a){a&&o(t),a&&o(e),a&&o(r),a&&o(l),a&&o(y),V(b,a),a&&o(E),a&&o(w),a&&o(O),V(C,a)}}}function A(a){return[]}export default class extends t{constructor(a){super(),e(this,a,A,W,s,{})}}
